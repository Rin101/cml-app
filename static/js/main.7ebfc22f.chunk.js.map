{"version":3,"sources":["commands.js","Editor.js","App.js","useLocalStorage.js","index.js"],"names":["IchigimeInput","props","className","type","onClick","e","trashInput","class","OshitukeInput","TimerInput","BunkiInput","BunkiVInput","Editor","onBeforeChange","editor","data","value","onChange","options","lineWrapping","lint","lineNumbers","theme","App","key","initialValue","prefixedKey","useState","jsonValue","localStorage","getItem","JSON","parse","setValue","useEffect","setItem","stringify","useLocalStorage","cmlOutput","setCmlOutput","userInputArr","setUserInputArr","userInputArea","useRef","addCommand","document","tmp","push","inputToCML","commands","current","querySelectorAll","res","Array","from","map","command","inputArr","inputValues","input","inputToIchigimeCML","inputToOshitukeCML","inputToTimerCML","index","indexOf","target","splice","Date","getTime","ref","Button","variant","alert","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7ebfc22f.chunk.js","sourcesContent":["export const inputToIchigimeCML = (document) => {\r\n    const inputArr = document.querySelectorAll('input')\r\n    let inputValues = []\r\n    Array.from(inputArr).map(input => inputValues.push(input.value))\r\n    return (\r\n        `P=${inputValues[0]}\\nA=${inputValues[1]}\\nS=${inputValues[2]}\\n`\r\n    )\r\n}\r\n\r\nexport const IchigimeInput = (props) => {\r\n    return (\r\n        <div className=\"ichigime-input input-block\">\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">mm</span>を</p>\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">秒</span>で加速して</p>\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">秒</span>で移動する</p>\r\n            {/* how to get parent of e */}\r\n            <div className=\"trash-input unselectable\" onClick={(e) => props.trashInput(e)}><i class=\"fas fa-times\"></i></div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// ------------------------------------------------\r\n\r\nexport const inputToOshitukeCML = (document) => {\r\n    const inputArr = document.querySelectorAll('input')\r\n    let inputValues = []\r\n    Array.from(inputArr).map(input => inputValues.push(input.value))\r\n    return (\r\n        `Q=${inputValues[0]}\\nA=${inputValues[1]}\\nS=${inputValues[2]}\\n`\r\n    )\r\n}\r\n\r\nexport const OshitukeInput = (props) => {\r\n    return (\r\n        <div className=\"oshituke-input input-block\">\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">mm</span>の位置まで</p>\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">秒</span>で加速して</p>\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">秒</span>で押付け動作をする</p>\r\n            <div className=\"trash-input unselectable\" onClick={(e) => props.trashInput(e)}><i class=\"fas fa-times\"></i></div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// ------------------------------------------------\r\n\r\nexport const inputToTimerCML = (document) => {\r\n    const inputArr = document.querySelectorAll('input')\r\n    let inputValues = []\r\n    Array.from(inputArr).map(input => inputValues.push(input.value))\r\n    return (\r\n        `T=${inputValues[0]}\\n`\r\n    )\r\n}\r\n\r\nexport const TimerInput = (props) => {\r\n    return (\r\n        <div className=\"timer-input input-block\">\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">秒</span>待つ</p>\r\n            <div className=\"trash-input unselectable\" onClick={(e) => props.trashInput(e)}><i class=\"fas fa-times\"></i></div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// ------------------------------------------------\r\n\r\nexport const inputToBunkiCML = (document) => {\r\n    const inputArr = document.querySelectorAll('input')\r\n    let inputValues = []\r\n    Array.from(inputArr).map(input => inputValues.push(input.value))\r\n    return (\r\n        `I=${inputValues[0]}\\nA=${inputValues[1]}\\nS=${inputValues[2]}\\n`\r\n    )\r\n}\r\n\r\nexport const BunkiInput = (props) => {\r\n    return (\r\n        <div className=\"bunki-input input-block\">\r\n            <p>もし入力</p>\r\n            <input type=\"text\"></input>\r\n            <p>が<span className=\"tanni\">オン</span>のとき</p>\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">オフ</span>のとき</p>\r\n            <input type=\"text\"></input>\r\n            <div className=\"trash-input unselectable\" onClick={(e) => props.trashInput(e)}><i class=\"fas fa-times\"></i></div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// ------------------------------------------------\r\n\r\nexport const inputToBunkiVCML = (document) => {\r\n    const inputArr = document.querySelectorAll('input')\r\n    let inputValues = []\r\n    Array.from(inputArr).map(input => inputValues.push(input.value))\r\n    return (\r\n        `I=${inputValues[0]}\\nA=${inputValues[1]}\\nS=${inputValues[2]}\\n`\r\n    )\r\n}\r\n\r\nexport const BunkiVInput = (props) => {\r\n    const text = \">,=,<\"\r\n    return (\r\n        <div className=\"bunkiv-input input-block\">\r\n            <p>もし</p>\r\n            <input type=\"text\"></input>\r\n            <p><span className=\"tanni\">{text}</span></p>\r\n            <input type=\"text\"></input>\r\n            <p>のとき</p>\r\n            <input type=\"text\"></input>\r\n            <div className=\"trash-input unselectable\" onClick={(e) => props.trashInput(e)}><i class=\"fas fa-times\"></i></div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/material.css'\r\nimport { Controlled as ControlledEditor } from 'react-codemirror2'\r\n\r\nexport const Editor = (props) => {\r\n\r\n    const handleChange = (editor, data, value) => {\r\n        props.onChange(value)\r\n    }\r\n\r\n    return(\r\n        <div className=\"cml-editor-container\">\r\n            <ControlledEditor \r\n                onBeforeChange={handleChange}\r\n                value={props.value}\r\n                className=\"cml-editor\"\r\n                options={{\r\n                    lineWrapping: true,\r\n                    lint: true,\r\n                    lineNumbers: true,\r\n                    theme: 'material'\r\n                }} \r\n            />\r\n        </div>\r\n    )\r\n}","import { Button } from '@mui/material';\r\nimport React, { useRef, useState } from 'react';\r\nimport './App.css'\r\nimport { BunkiInput, BunkiVInput, IchigimeInput, inputToIchigimeCML, inputToOshitukeCML, inputToTimerCML, OshitukeInput, TimerInput } from './commands';\r\nimport { Editor } from './Editor';\r\nimport useLocalStorage from './useLocalStorage';\r\n\r\nexport const App = () => {\r\n\r\n    const [cmlOutput, setCmlOutput] = useLocalStorage('CML', '')\r\n    const [userInputArr, setUserInputArr] = useState([])\r\n\r\n    const userInputArea = useRef()\r\n\r\n    const addCommand = (document) => {\r\n        let tmp = [...userInputArr]\r\n        tmp.push(document)\r\n        setUserInputArr(tmp)\r\n    }\r\n\r\n    const inputToCML = () => {\r\n        const commands = userInputArea.current.querySelectorAll('div')\r\n        let res = cmlOutput\r\n        Array.from(commands).map(command => {\r\n            switch (command.className) {\r\n                case 'ichigime-input input-block':\r\n                    res += inputToIchigimeCML(command)\r\n                    break;\r\n                case 'oshituke-input input-block':\r\n                    res += inputToOshitukeCML(command)\r\n                    break;\r\n                case 'timer-input input-block':\r\n                    res += inputToTimerCML(command)\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return 0\r\n        })\r\n        setCmlOutput(res)\r\n    } \r\n\r\n    const trashInput = (e) => {\r\n        let tmp = [...userInputArr]\r\n\r\n        const index = tmp.indexOf(e.target);\r\n        if (index > -1) {\r\n            tmp.splice(index, 1);\r\n        }\r\n\r\n        setUserInputArr(tmp)\r\n    }\r\n\r\n    return (\r\n        <div className=\"main\">\r\n            <section className=\"command-selector-section\">\r\n                <div className=\"command-selector unselectable\" onClick={() => addCommand(<IchigimeInput trashInput={trashInput} key={new Date().getTime()}/>)}><p>位置決め</p><i className=\"fas fa-plus-circle\"></i></div>\r\n                <div className=\"command-selector unselectable\" onClick={() => addCommand(<OshitukeInput key={new Date().getTime()}/>)}><p>押し付け</p><i className=\"fas fa-plus-circle\"></i></div>\r\n                <div className=\"command-selector unselectable\" onClick={() => addCommand(<TimerInput key={new Date().getTime()}/>)}><p>タイマー</p><i className=\"fas fa-plus-circle\"></i></div>\r\n                <div className=\"command-selector unselectable\" onClick={() => addCommand(<BunkiInput key={new Date().getTime()}/>)}><p>分岐(入力信号)</p><i className=\"fas fa-plus-circle\"></i></div>\r\n                <div className=\"command-selector unselectable\" onClick={() => addCommand(<BunkiVInput key={new Date().getTime()}/>)}><p>分岐(V変数)</p><i className=\"fas fa-plus-circle\"></i></div>\r\n                <div className=\"command-selector unselectable\" onClick={() => addCommand(<IchigimeInput key={new Date().getTime()}/>)}><p>繰り返し</p><i className=\"fas fa-plus-circle\"></i></div>\r\n                <div className=\"command-selector unselectable\" onClick={() => addCommand(<IchigimeInput key={new Date().getTime()}/>)}><p>停止</p><i className=\"fas fa-plus-circle\"></i></div>\r\n            </section>\r\n            <section className=\"user-input-section\">\r\n                <div className=\"user-input-area\" ref={userInputArea}>\r\n                    {userInputArr}\r\n                </div>\r\n                <div className=\"enter-button\">\r\n                    <Button variant=\"contained\" onClick={() => inputToCML()}>入力</Button>\r\n                </div>\r\n            </section>\r\n            <section className=\"cml-output-section\">\r\n                <h3>CML</h3>\r\n                <Editor value={cmlOutput} onChange={setCmlOutput} />\r\n                <div className=\"jikkou-button\">\r\n                    <Button variant=\"contained\" onClick={() => alert(\"実行されました\")}>実行</Button>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nconst PREFIX = 'CML-app-'\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n    const prefixedKey = PREFIX + key\r\n\r\n    const [value, setValue] = useState(() => {\r\n        const jsonValue = localStorage.getItem(prefixedKey)\r\n        if (jsonValue != null) return JSON.parse(jsonValue)\r\n        \r\n        if (typeof initialValue === 'function') {\r\n            return initialValue()\r\n        } else {\r\n            return initialValue\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }, [prefixedKey, value])\r\n\r\n    return [value, setValue] \r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}