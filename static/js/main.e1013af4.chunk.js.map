{"version":3,"sources":["Editor.js","programBlock.js","toCml.js","menu.js","App.js","useLocalStorage.js","index.js"],"names":["Editor","props","className","onBeforeChange","editor","data","value","onChange","options","lineWrapping","lint","lineNumbers","theme","ProgramBlock","addRowRef","useRef","pgEmptyBox","trashInput","e","programData","setProgramData","indexArr","target","parentNode","id","split","shift","tmp","parseInt","trashJiku","jiku","dousa_group","splice","setJiku","setLoopData","addRow","currentTarget","emptyRow","i","push","showOnHover","style","backgroundColor","querySelector","display","hideOnLeave","addJiku","showOnHoverJiku","hideOnLeaveJiku","moveRow","direction","dousaGroup","rowIndex","length","moveJiku","current_jiku","dousa_row","console","log","tmp_dousa","changeCML","loopData","isNyuryokuShingou","setCmlOutput","output","every_data_teigi","every_program_teigi","indexOf","toString","dousa_jikkou_of_group","dousa_jikkou_row_arr","dousa","dousa_jiku","cml_numbers","alert","loop_start","loop_end","loop","join","toCML","showTypeData","emptyBoxDragEnd","emptyBoxDragOver","currentDraggedCommand","preventDefault","emptyBoxDragEnter","emptyBoxDragLeave","emptyBoxDragDrop","includes","draggedIndexArr","resizeLoop","mainItemIndex","forEach","isDirectionAvailable","rowLength","pg_l_arr","main_grid","jiku_i","onClick","onMouseEnter","onMouseLeave","gridColumn","dousa_group_i","tmpLoop","trashGroup","dontPutEmp","dousa_row_i","loopCount","loopHeight","loopStyleHeight","z","dragArrows","height","dousaType","dousaNum","map","dragArrow","index","trashLoop","onDragOver","emptyBoxLoopDragOver","onDragEnter","emptyBoxLoopDragEnter","onDragLeave","emptyBoxLoopDragLeave","onDrop","emptyBoxLoopDragDrop","ref","dousa_i","draggable","onDragStart","onDragEnd","setCurrentDraggedCommand","trashRow","addGroupDragOver","addGroupDragEnter","addGroupDragLeave","emptyGroup","addGroupDragDrop","gridTemplateColumns","dataToHTML","Button","variant","TypeDataInDousa","dousaInput","closeTypeData","inputLine","isAllNumber","querySelectorAll","input","isNaN","valueArr","programNum","setTypeData","TopMenu","topMenuRef","handleFileSave","obj","filename","type","file","Blob","window","navigator","msSaveOrOpenBlob","a","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","downloadFile","JSON","stringify","isNyuryoku","htmlFor","accept","reader","FileReader","onload","parse","result","err","readAsText","files","handleFileImport","current","layerRef","closeTanni","nyuryokuText","classList","contains","cmlOutput","tmpstr","replace","remove","add","setIsNyuryokuShingou","toggleNyuryokuShingou","Tannikannsann","useState","application","setApplication","bunkainou","setBunkainou","nyuryokuInput","shuturyokuInput","susumiInput","getApplicationType","setItem","itemArr","trim","Math","PI","getPulse","Dropdown","selectedItem","setSelectedItem","dropdownItems","selectedItemRef","clickItem","innerText","item","App","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","setValue","useEffect","useLocalStorage","expCopy","expCopyDone","commandSelectorRef","commandHover","handleFileExport","message","Date","now","innerHTML","popMessage","cml","clipboard","writeText","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e1013af4.chunk.js","sourcesContent":["import React from 'react'\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/material.css'\r\nimport { Controlled as ControlledEditor } from 'react-codemirror2'\r\n\r\nexport const Editor = (props) => {\r\n\r\n    const handleChange = (editor, data, value) => {\r\n        props.onChange(value)\r\n    }\r\n\r\n    return(\r\n        <div className=\"cml-editor-container\">\r\n            <ControlledEditor \r\n                onBeforeChange={handleChange}\r\n                value={props.value}\r\n                className=\"cml-editor\"\r\n                options={{\r\n                    lineWrapping: true,\r\n                    lint: true,\r\n                    lineNumbers: true,\r\n                    theme: 'material'\r\n                }} \r\n            />\r\n        </div>\r\n    )\r\n}","import React, { useRef } from 'react'\r\nimport { Button, gridClasses } from '@mui/material';\r\nimport { toCML } from './toCml';\r\n\r\nexport const ProgramBlock = (props) => {\r\n\r\n    const addRowRef = useRef()\r\n    const pgEmptyBox = useRef()\r\n\r\n    const trashInput = (e, programData, setProgramData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])] = []\r\n        setProgramData(tmp) \r\n    }\r\n\r\n    const trashLoop = (e, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...loopData]\r\n        let index = -1\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                index = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        if (index !== -1) {\r\n            tmp.splice(index, 1);\r\n        }\r\n        setLoopData(tmp) \r\n    }\r\n\r\n    const trashRow = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp[parseInt(indexArr[0])].length > 1) {\r\n            tmp[parseInt(indexArr[0])].splice(parseInt(indexArr[1]), 1);        \r\n        } else {\r\n            let emptyRow = []\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                emptyRow.push([])\r\n                i += 1\r\n            }\r\n            tmp[parseInt(indexArr[0])] = [emptyRow]\r\n        }\r\n        // ------------------------------------\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                if (loop[1][1] === loop[0][1]) {\r\n                    tmpLoop.splice(tmpLoop.indexOf(loop), 1);\r\n                }\r\n            } else if (loop[1][0] === indexArr[0] && loop[1][1] === indexArr[1]) {\r\n                loop[1] = [indexArr[0], (parseInt(indexArr[1])-1).toString()]\r\n            }\r\n        })\r\n\r\n        tmpLoop.forEach(loop => {\r\n            if ((programData[parseInt(loop[0][0])].length - 1) < (loop[1][1] - parseInt(loop[0][1]))) {\r\n                loop[1][1] = (parseInt(loop[1][1])-1).toString()\r\n            }\r\n        })\r\n\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashGroup = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp.length > 1) {\r\n            tmp.splice(parseInt(indexArr[0]), 1);\r\n        } else {\r\n            tmp = [[[]]]\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                tmp[0][0].push([])\r\n                i += 1\r\n            }\r\n        }\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0]) {\r\n                indexArr.push(tmpLoop.indexOf(loop))\r\n            }\r\n        })\r\n        let i = tmpLoop.length\r\n        while (i--) {\r\n            if (tmpLoop[i][0][0] === indexArr[0]) {\r\n                tmpLoop.splice(i, 1)\r\n            }\r\n        }\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashJiku = (e) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        if (props.jiku > 1) {\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    dousa_row.splice(indexArr[0]-1, 1)\r\n                }\r\n            }\r\n            props.setJiku(props.jiku - 1)\r\n        } else {\r\n            tmp = [[[[]]]]\r\n            props.setLoopData([])\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const addRow = (e) => {\r\n        const indexArr = e.currentTarget.id.split('-')\r\n        indexArr.shift()\r\n        let emptyRow = []\r\n        let i = 0\r\n        while (i <= props.jiku-1) {\r\n            emptyRow.push([])\r\n            i += 1\r\n        }\r\n        let tmp = [...props.programData]\r\n        tmp[parseInt(indexArr[0])].splice(parseInt(indexArr[1]), 0, emptyRow)\r\n        props.setProgramData(tmp) \r\n    }\r\n\r\n    const showOnHover = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"red\"\r\n        e.target.querySelector(\".add-row-plus-cont\").style.display = \"flex\"\r\n    }\r\n\r\n    const hideOnLeave = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"white\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"none\"\r\n    }\r\n\r\n    const addJiku = (e) => {\r\n        const indexArr = e.currentTarget.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        for (let dousa_group of tmp) {\r\n            for (let dousa_row of dousa_group) {\r\n                dousa_row.splice(parseInt(indexArr[0])-1, 0, [])\r\n            }\r\n        }\r\n        props.setProgramData(tmp) \r\n        props.setJiku(props.jiku + 1)\r\n    }\r\n\r\n    const showOnHoverJiku = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"red\"\r\n        e.currentTarget.querySelector(\".add-jiku-plus-cont\").style.display = \"flex\"\r\n    }\r\n\r\n    const hideOnLeaveJiku = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"white\"\r\n        e.currentTarget.querySelector(\".add-jiku-plus-cont\").style.display = \"none\"\r\n    }\r\n\r\n    const moveRow = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        const dousaGroup = tmp[parseInt(indexArr[0])]\r\n        const rowIndex = parseInt(indexArr[1])\r\n        switch (direction) {\r\n            case \"up\":\r\n                if (rowIndex >= 1) {\r\n                    [dousaGroup[rowIndex-1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex-1]]\r\n                }\r\n                break\r\n            case \"down\":\r\n                if (rowIndex < dousaGroup.length-1) {\r\n                    [dousaGroup[rowIndex+1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex+1]]\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const moveJiku = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let current_jiku = parseInt(indexArr[0])\r\n        let tmp = [...props.programData]\r\n        switch (direction) {\r\n            case \"left\":\r\n                if (current_jiku !== 1) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            console.log(current_jiku-1)\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku-2]]\r\n                            dousa_row[current_jiku-2] = tmp_dousa\r\n                        }\r\n                    }\r\n                }\r\n                break\r\n            case \"right\":\r\n                if (current_jiku !== props.jiku) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku]]\r\n                            dousa_row[current_jiku] = tmp_dousa\r\n                        }\r\n                    }\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const changeCML = (programData, loopData, isNyuryokuShingou) => {\r\n        props.setCmlOutput(toCML(programData, loopData, isNyuryokuShingou))\r\n    }\r\n\r\n    const showTypeData = (e) => {\r\n        e.target.parentNode.querySelector('.typeDataInDousa').style.display = \"flex\"\r\n    }\r\n\r\n        \r\n    // Drag Functions\r\n    const emptyBoxDragStart = (e) => {\r\n        // e.currentTarget.className += \"dousa-box\"\r\n        // setTimeout(() => (e.currentTarget.className = 'dragged-box'), 0);\r\n    }\r\n    \r\n    const emptyBoxDragEnd = (e) => {\r\n        e.currentTarget.className = \"dousa-box\"\r\n    }\r\n\r\n    function emptyBoxDragOver(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragEnter(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-empty-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragLeave(e) {\r\n        e.target.className = 'pg-empty-box';\r\n    }\r\n\r\n    function emptyBoxDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\" && !props.currentDraggedCommand.includes(\"-\")) {\r\n            tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])] = [props.currentDraggedCommand, 1, [\"initial\", \"initial\", \"initial\"]]\r\n            props.setProgramData(tmp)\r\n        } else if (props.currentDraggedCommand.includes(\"-\")) {\r\n            let draggedIndexArr = props.currentDraggedCommand.split(\"-\")\r\n            draggedIndexArr.shift()\r\n            tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])] = tmp[parseInt(draggedIndexArr[0])][parseInt(draggedIndexArr[1])][parseInt(draggedIndexArr[2])]\r\n            tmp[parseInt(draggedIndexArr[0])][parseInt(draggedIndexArr[1])][parseInt(draggedIndexArr[2])] = []\r\n            props.setProgramData(tmp)\r\n        }\r\n    }\r\n    // -------\r\n    function emptyBoxLoopDragOver(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragEnter(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-l-empty-loop-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragLeave(e) {\r\n        e.target.className = 'pg-l-empty-loop';\r\n    }\r\n\r\n    function emptyBoxLoopDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            tmp.push([[indexArr[0], indexArr[1]], [indexArr[0], indexArr[1]], 2])\r\n            props.setLoopData(tmp)\r\n        } \r\n    }\r\n\r\n    const resizeLoop = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        let mainItemIndex\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                mainItemIndex = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        let isDirectionAvailable = true\r\n        switch(direction) {\r\n            case \"top-up\":\r\n                tmp.forEach(loop => {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (loop[1][0] === tmp[mainItemIndex][0][0] && loop[1][1] === tmp[mainItemIndex][0][1])) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                })\r\n                if (isDirectionAvailable && parseInt(tmp[mainItemIndex][0][1]) >= 1) {\r\n                    tmp[mainItemIndex][0][1] = (parseInt(tmp[mainItemIndex][0][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"top-down\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][0][1] = (parseInt(tmp[mainItemIndex][0][1]) + 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-up\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][1][1] = (parseInt(tmp[mainItemIndex][1][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-down\":\r\n                for (let loop of tmp) {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (loop[0][0] === tmp[mainItemIndex][1][0] && loop[0][1] === tmp[mainItemIndex][1][1])) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                }\r\n                let rowLength = props.programData[tmp[mainItemIndex][1][0]].length\r\n                if (isDirectionAvailable && parseInt(tmp[mainItemIndex][1][1]) < (rowLength - 1)) {\r\n                    tmp[mainItemIndex][1][1] = (parseInt(tmp[mainItemIndex][1][1]) + 1).toString()\r\n                }\r\n                break          \r\n            default:\r\n                break \r\n        }\r\n        props.setLoopData(tmp)\r\n    }\r\n    // -------\r\n    function addGroupDragOver(e) {\r\n        if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function addGroupDragEnter(e) {\r\n        e.currentTarget.style.backgroundColor = \"red\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"flex\"\r\n    }\r\n    \r\n    function addGroupDragLeave(e) {\r\n        e.currentTarget.style.backgroundColor = \"white\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"none\"\r\n    }\r\n    \r\n    function addGroupDragDrop(e) {\r\n        const indexArr = e.currentTarget.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n            let emptyGroup = [[]]\r\n            for (let z = 0; z < props.jiku; z++) emptyGroup[0].push([]);\r\n            tmp.splice((indexArr[0]+1), 0, emptyGroup); \r\n            props.setProgramData(tmp)\r\n        } \r\n        e.currentTarget.style.backgroundColor = \"white\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"none\"\r\n    }\r\n\r\n    const dataToHTML = (programData) => {\r\n        let pg_l_arr = [<div className=\"pg-l-empty pglemp0\" key={\"first-pg-l-empty-box\"}></div>]\r\n        let main_grid = []\r\n        let jiku_i = 1\r\n        while (jiku_i <= props.jiku) {\r\n            if (jiku_i === 1) {\r\n                main_grid.push(<div className=\"jiku-number\" id={\"jiku-\"+jiku_i} key={\"jiku\"+jiku_i}><div className=\"add-jiku-left\" id={\"addJiku-\"+jiku_i} onClick={(e) => addJiku(e)} onMouseEnter={(e) => showOnHoverJiku(e)} onMouseLeave={(e) => hideOnLeaveJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_i+1)} onClick={(e) => addJiku(e)} onMouseEnter={(e) => showOnHoverJiku(e)} onMouseLeave={(e) => hideOnLeaveJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>{jiku_i}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            } else {\r\n                main_grid.push(<div className=\"jiku-number\" id={\"jiku-\"+jiku_i} key={\"jiku\"+jiku_i}><div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_i+1)} onClick={(e) => addJiku(e)} onMouseEnter={(e) => showOnHoverJiku(e)} onMouseLeave={(e) => hideOnLeaveJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>{jiku_i}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            }\r\n            jiku_i += 1\r\n        }\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-0firrrst\"}></div>)\r\n        main_grid.push(<div className=\"grid-line\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"first-grid-line-key\"}></div>)\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-ggggllllliiinnneeee\"}></div>)\r\n        let dousa_group_i = 0\r\n        for (let dousa_group of programData) {\r\n            pg_l_arr.push(<div className=\"pg-l-empty pglempgroup\" key={\"pglempty\"+dousa_group_i}></div>)\r\n            main_grid.push(<div className=\"dousa-group-kaishi unselectable\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"dousagroup-\"+dousa_group_i} id={\"dousaGroup-\"+dousa_group_i}><p>動作グループ{dousa_group_i+1}の開始</p><i className=\"fas fa-trash\" onClick={(e) => trashGroup(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)}></i></div>)\r\n            main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i}></div>)\r\n            let dontPutEmp = []\r\n            let dousa_row_i = 0\r\n            for (let dousa_row of dousa_group) {\r\n                let loopCount\r\n                props.loopData.forEach(loop => {\r\n                    if (loop[0][0] === dousa_group_i.toString() && loop[0][1] === dousa_row_i.toString()) {\r\n                        loopCount = loop[2]\r\n                        let loopHeight = loop[1][1] - loop[0][1] + 1\r\n                        let loopStyleHeight = loopHeight * 2.3 + ((loopHeight-1) * (0.2 + 0.4))\r\n                        for (let z = 0; z < loopHeight; z++) dontPutEmp.push(\"loop\");\r\n                        let dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"top-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        if (loop[0][1] === loop[1][1]) {\r\n                            dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        }\r\n                        pg_l_arr.push(\r\n                        <div className=\"pg-l-loop unselectable\" style={{height:loopStyleHeight+\"rem\"}} id={\"loop-\"+dousa_group_i+\"-\"+dousa_row_i} key={\"pglloop\"+dousa_row}>\r\n                            <TypeDataInDousa loopData={props.loopData} setLoopData={props.setLoopData} dousaType=\"繰り返し\" dousaNum={0}/>\r\n                            {dragArrows.map(dragArrow => {return dragArrow})}\r\n                            <p className=\"loop-title\" onClick={(e) => showTypeData(e)}>繰り返し{loopCount}回</p>\r\n                            <i className=\"fas fa-trash trash-block\" onClick={(e) => trashLoop(e, props.loopData, props.setLoopData)}></i>\r\n                        </div>)\r\n                    }\r\n                })\r\n                if (dontPutEmp.length === 0) {\r\n                    pg_l_arr.push(<div className=\"pg-l-empty-loop\" id={\"emptyloop-\"+dousa_group_i+\"-\"+dousa_row_i} onDragOver={(e) => emptyBoxLoopDragOver(e)} onDragEnter={(e) => emptyBoxLoopDragEnter(e)} onDragLeave={(e) => emptyBoxLoopDragLeave(e)} onDrop={(e) => emptyBoxLoopDragDrop(e)} key={\"pglemploop-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    dontPutEmp.shift()\r\n                }\r\n                if (dousa_row_i === 0) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow0\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-0\"} onClick={(e) => addRow(e)} onMouseEnter={(e) => showOnHover(e)} onMouseLeave={(e) => hideOnLeave(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                let dousa_i = 0\r\n                for (let dousa of dousa_row) {\r\n                    if (dousa.length !== 0) {\r\n                        if (dousa[2].includes(\"initial\")) {\r\n                            main_grid.push(<div className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}><div className='no-value-circle'></div><TypeDataInDousa programData={props.programData} setProgramData={props.setProgramData} dousaType={dousa[0]} dousaNum={dousa[1]}/><p onClick={(e) => showTypeData(e)} >{dousa[0]}{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        } else {\r\n                            main_grid.push(<div className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}><TypeDataInDousa programData={props.programData} setProgramData={props.setProgramData} dousaType={dousa[0]} dousaNum={dousa[1]}/><p onClick={(e) => showTypeData(e)} >{dousa[0]}{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        }\r\n                    } else {\r\n                        // main_grid.push(<div className=\"dousa-box\"></div>)\r\n                        main_grid.push(<div ref={pgEmptyBox} key={dousa_group_i+\"emptybox\"+dousa_row_i+\"-\"+dousa_i} onDragOver={(e) => emptyBoxDragOver(e)} onDragEnter={(e) => emptyBoxDragEnter(e)} onDragLeave={(e) => emptyBoxDragLeave(e)} onDrop={(e) => emptyBoxDragDrop(e)} className=\"pg-empty-box\" id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}></div>)\r\n                    }\r\n                    dousa_i += 1\r\n                }\r\n                main_grid.push(\r\n                    <div className=\"trash-row-right-box\" key={\"trashR-\"+dousa_group_i+\"-\"+dousa_row_i} id={\"trashRow-\"+dousa_group_i+\"-\"+(dousa_row_i)}>\r\n                        <i onClick={(e) => trashRow(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)} className=\"fas fa-trash\"></i>\r\n                        <div className='move-row-cont'><i className='fas fa-arrow-alt-circle-up move-row-up' onClick={(e) => moveRow(e, \"up\")}></i><i className='fas fa-arrow-alt-circle-down move-row-down' onClick={(e) => moveRow(e, \"down\")}></i></div>\r\n                    </div>)\r\n                if (dousa_row_i !== (dousa_group.length-1)) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} onMouseEnter={(e) => showOnHover(e)} onMouseLeave={(e) => hideOnLeave(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} onMouseEnter={(e) => showOnHover(e)} onMouseLeave={(e) => hideOnLeave(e)} onDragOver={(e) => addGroupDragOver(e)} onDragEnter={(e) => addGroupDragEnter(e)} onDragLeave={(e) => addGroupDragLeave(e)} onDrop={(e) => addGroupDragDrop(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1),height:\"0.4rem\"}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                dousa_row_i += 1\r\n            }\r\n            dousa_group_i += 1\r\n        }\r\n\r\n        return (\r\n            <div className=\"program-grid\">\r\n                <div className=\"pg-left\">{pg_l_arr}</div>\r\n                <div className=\"program-main-grid\" style={{gridTemplateColumns:\"repeat(\"+props.jiku+\", 3fr) 1fr\"}}>{main_grid}</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // initially have 動作グループ1\r\n    return(\r\n        <div className=\"program-block\">\r\n            {dataToHTML(props.programData)}\r\n            <div className=\"enter-button\">\r\n                <Button variant=\"contained\" onClick={() => changeCML(props.programData, props.loopData, props.isNyuryokuShingou)}>入力</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst TypeDataInDousa = (props) => {\r\n    // let dousaType = props.dousaType\r\n    // let dousaNum = props.dousaNum\r\n\r\n    const closeTypeData = (e) => {\r\n        e.target.parentNode.parentNode.style.display = \"none\"\r\n    }\r\n\r\n    const setTypeData = (e) => {\r\n        let isAllNumber = true\r\n        e.target.parentNode.querySelectorAll('.type-data-input').forEach(input => {\r\n            if (isNaN(parseInt(input.value))) {\r\n                isAllNumber = false\r\n            }\r\n        })\r\n        if (isAllNumber) {\r\n            let indexArr = e.target.parentNode.parentNode.id.split('-')\r\n            indexArr.shift()\r\n            let valueArr = []\r\n            e.target.parentNode.querySelectorAll('.type-data-input').forEach(input => {\r\n                valueArr.push(input.value)\r\n            })\r\n            let programNum = valueArr[0]\r\n            valueArr.shift()\r\n            if (props.dousaType !== \"繰り返し\") {\r\n                let tmp = [...props.programData]\r\n                tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][2] = valueArr\r\n                tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][1] = programNum\r\n                props.setProgramData(tmp)\r\n            } else {\r\n                let tmp = props.loopData\r\n                tmp = tmp.map(loop => {\r\n                    if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                        loop[2] = valueArr[0]\r\n                        return loop\r\n                    } else {\r\n                        return loop\r\n                    }\r\n                })\r\n                props.setLoopData(tmp)\r\n            }\r\n            e.target.parentNode.style.display = \"none\"\r\n        } else {\r\n            alert('数字を入力してください') \r\n        }\r\n    } \r\n\r\n    let dousaInput\r\n\r\n    switch (props.dousaType) {\r\n        case \"位置決め\":\r\n            dousaInput = [\r\n                [<p className=\"typedata-var\" key={0}>速度データ{props.dousaNum}</p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>mm/s<span>と</span></p>],\r\n                [<p className=\"typedata-var\" key={0}>加速度データ{props.dousaNum}</p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>mm/s2<span>で</span></p>],\r\n                [<p className=\"typedata-var\" key={0}>位置データ{props.dousaNum}</p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>mm<span>へ移動する</span></p>]\r\n            ]\r\n            break\r\n        case \"押付け\":\r\n            dousaInput = [\r\n                [<p className=\"typedata-var\" key={0}>速度データ{props.dousaNum}</p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>mm/s<span>と</span></p>],\r\n                [<p className=\"typedata-var\" key={0}>加速度データ{props.dousaNum}</p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>mm/s2<span>で</span></p>],\r\n                [<p className=\"typedata-var\" key={0}>位置データ{props.dousaNum}</p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>mm<span>へ押付け動作する</span></p>]\r\n            ]\r\n            break\r\n        case \"トルク制限\":\r\n            dousaInput = [\r\n                [<p className=\"typedata-var\" key={0}>トルク制限データ{props.dousaNum}<span>を</span></p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>%<span>に設定する</span></p>]\r\n            ]\r\n            break\r\n        case \"タイマ\":\r\n            dousaInput = [\r\n                [<p className=\"typedata-var\" key={0}>タイマデータ{props.dousaNum}<span>を</span></p>,<input className=\"type-data-input\" key={1}/>,<p className=\"type-data-tanni\" key={2}>msec<span>に設定する</span></p>]\r\n            ]\r\n            break\r\n        case \"繰り返し\":\r\n            dousaInput = [\r\n               [<input className=\"type-data-input\" key={0}/>,<p className=\"type-data-tanni\" key={1}>回<span>繰り返す</span></p>]\r\n            ]\r\n            break\r\n        default:\r\n            dousaInput = [[<div>NOPE</div>]]\r\n            break\r\n    }\r\n\r\n    return (\r\n        <div className=\"typeDataInDousa\">\r\n            <div className=\"close-typedata\"><i onClick={(e) => closeTypeData(e)} className=\"fas fa-times-circle\"></i></div>\r\n            <div className='typedata-input-line' key={\"input-num-line\"}>\r\n                <p className='typedata-var'>番号:</p><input className=\"type-data-input\" key={\"input-num\"}/>\r\n            </div>\r\n            {dousaInput.map(inputLine => {return <div className=\"typedata-input-line\" key={dousaInput.indexOf(inputLine)+inputLine}>{inputLine}</div>})}\r\n            <Button className=\"type-data-button\" variant=\"contained\" onClick={(e) => setTypeData(e)}>OK</Button>\r\n        </div>\r\n    )\r\n}","export const toCML = (programData, loopData, isNyuryokuShingou) => {\r\n    let output = \"\"\r\n    let every_data_teigi = \"\"\r\n    let every_program_teigi = \"\"\r\n    for (let dousa_group of programData) {\r\n        let dousa_group_index = programData.indexOf(dousa_group) + 1\r\n        every_program_teigi += \"B\" + dousa_group_index.toString() + \"\\n\"\r\n        let dousa_jikkou_of_group = \"\"\r\n        for (let dousa_row of dousa_group) {\r\n            let dousa_jikkou_row_arr = []\r\n            for (let dousa of dousa_row) {\r\n                if (dousa.length !== 0) {\r\n                    let dousa_jiku = dousa_row.indexOf(dousa) + 1\r\n                    let cml_numbers = dousa[1].toString() + \".\" + dousa_jiku.toString()\r\n                    switch (dousa[0]) {\r\n                        case \"位置決め\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\nA\"+cml_numbers+\"=\"+dousa[2][1].toString()+\"\\nP\"+cml_numbers+\"=\"+dousa[2][2].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}`)\r\n                            break\r\n                        case \"押付け\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\nA\"+cml_numbers+\"=\"+dousa[2][1].toString()+\"\\nP\"+cml_numbers+\"=\"+dousa[2][2].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}`)\r\n                            break\r\n                        case \"トルク制限\":\r\n                            every_data_teigi += \"M\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`M${cml_numbers}`)\r\n                            break\r\n                        case \"タイマ\":\r\n                            every_data_teigi += \"T\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`T${cml_numbers}`)\r\n                            break\r\n                        default:\r\n                            alert('wrong')\r\n                            break\r\n                    }\r\n                }\r\n            }\r\n            let loop_start = \"\"\r\n            let loop_end = \"\"\r\n            for (let loop of loopData) {\r\n                if (loop[0][0] === programData.indexOf(dousa_group).toString() && loop[0][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_start = `X${loop[2]}.1\\n`\r\n                }\r\n                if (loop[1][0] === programData.indexOf(dousa_group).toString() && loop[1][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_end = `X.1-\\n`\r\n                }\r\n            }\r\n            dousa_jikkou_of_group += loop_start + dousa_jikkou_row_arr.join(\",\") + \"\\n\" + loop_end\r\n        }\r\n        every_program_teigi += dousa_jikkou_of_group + \"\\n\"\r\n    }\r\n    \r\n    output += every_data_teigi + \"\\n\"\r\n    output += every_program_teigi + \"\\n\"\r\n    if (isNyuryokuShingou) {\r\n        let nyuryokuTxt = `K81=1\r\n        K82=1\r\n        L1.1\r\n        I1.1,JL2.1,T0.1\r\n        I2.1,JL3.1,T0.1\r\n        I3.1,JL4.1,T0.1\r\n        I4.1,].1:].1,T0.1\r\n        L2.1\r\n        [1.1\r\n        I1.1,W0.1,JL1.1\r\n        L3.1\r\n        [2.1\r\n        I2.1,W0.1,JL1.1\r\n        L4.1\r\n        [3.1\r\n        I3.1,W0.1,JL1.1\r\n        END\r\n        `\r\n        return output + \"END\" + \"\\n\" + nyuryokuTxt\r\n    } else {\r\n        return output + \"END\"\r\n    }\r\n}\r\n","import { Button } from '@mui/material';\r\nimport React, { useRef, useState } from 'react';\r\n\r\n// Function to download data to a file\r\nexport const downloadFile = (data, filename, type) => {\r\n    var file = new Blob([data], {type: type});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        let a = document.createElement(\"a\"),\r\n        url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nexport const TopMenu = (props) => {\r\n\r\n    const topMenuRef = useRef()\r\n\r\n    const handleFileImport = (e) => {\r\n        const reader = new FileReader()\r\n        reader.onload = async (e) => { \r\n            // const obj = JSON.parse(e.target.result)\r\n            const obj = JSON.parse(reader.result)\r\n            try {\r\n                props.setProgramData(obj.data.programData)\r\n                props.setLoopData(obj.data.loopData)\r\n            } catch (err) {\r\n                alert('ファイルが間違っています')\r\n            }\r\n        };\r\n        reader.readAsText(e.target.files[0], \"utf-8\")\r\n    }\r\n\r\n    // Function to download data to a file\r\n    const downloadFile = (data, filename, type) => {\r\n        var file = new Blob([data], {type: type});\r\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n            window.navigator.msSaveOrOpenBlob(file, filename);\r\n        else { // Others\r\n            var a = document.createElement(\"a\"),\r\n                    url = URL.createObjectURL(file);\r\n            a.href = url;\r\n            a.download = filename;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            setTimeout(function() {\r\n                document.body.removeChild(a);\r\n                window.URL.revokeObjectURL(url);  \r\n            }, 0); \r\n        }\r\n    }\r\n\r\n    const handleFileSave = () => {\r\n        let obj = {\"name\":\"cml-import\",\"data\":{\"programData\":props.programData,\"loopData\":props.loopData}}\r\n        const data = JSON.stringify(obj)\r\n        const filename = \"CML-途中保存\"\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    const openTanni = () => {\r\n        topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"flex\"\r\n        props.layerRef.current.style.display = \"block\"\r\n    }\r\n\r\n    const closeTanni = (topMenuRef,　layerRef) => {\r\n        topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"none\"\r\n        layerRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const toggleNyuryokuShingou = (e) => {\r\n        const nyuryokuText = \r\n        `K81=1\r\n        K82=1\r\n        L1.1\r\n        I1.1,JL2.1,T0.1\r\n        I2.1,JL3.1,T0.1\r\n        I3.1,JL4.1,T0.1\r\n        I4.1,].1:].1,T0.1\r\n        L2.1\r\n        [1.1\r\n        I1.1,W0.1,JL1.1\r\n        L3.1\r\n        [2.1\r\n        I2.1,W0.1,JL1.1\r\n        L4.1\r\n        [3.1\r\n        I3.1,W0.1,JL1.1\r\n        END`\r\n        let isPressed = e.currentTarget.classList.contains(\"pressed-nyuryoku-shingou\")\r\n        if (isPressed) {\r\n            if (props.cmlOutput.includes(nyuryokuText)) {\r\n                let tmpstr = props.cmlOutput\r\n                props.setCmlOutput(tmpstr.replace(nyuryokuText,''))\r\n            }\r\n            e.target.classList.remove(\"pressed-nyuryoku-shingou\")\r\n            e.target.classList.add(\"unpressed-nyuryoku-shingou\")\r\n            props.setIsNyuryokuShingou(false)\r\n        } else {\r\n            if (!props.cmlOutput.includes(nyuryokuText)) {\r\n                let tmpstr = props.cmlOutput\r\n                props.setCmlOutput(tmpstr+\"\\n\"+nyuryokuText)\r\n            }\r\n            e.target.classList.remove(\"unpressed-nyuryoku-shingou\")\r\n            e.target.classList.add(\"pressed-nyuryoku-shingou\")\r\n            props.setIsNyuryokuShingou(true)\r\n        }\r\n    }\r\n\r\n    const isNyuryoku = props.isNyuryokuShingou ? \"オン\" : \"オフ\"\r\n\r\n    return (\r\n        <div ref={topMenuRef} className=\"top-menu\">\r\n            <div className=\"top-menu-button save-file unselectable\" onClick={() => handleFileSave()}>\r\n                プロジェクトファイルを保存\r\n            </div>\r\n            <div className=\"top-menu-button import-file unselectable\">\r\n                <label htmlFor=\"top-menu-file-upload\">\r\n                    プロジェクトファイルを開く\r\n                    <input id=\"top-menu-file-upload\" accept=\".txt\" type=\"file\" onChange={(e) => handleFileImport(e)}/>\r\n                </label>\r\n            </div>\r\n            <div className=\"top-menu-button tannikannsann\" onClick={() => openTanni()}>単位換算</div>\r\n            <Tannikannsann layerRef={props.layerRef} topMenuRef={topMenuRef} closeTanni={closeTanni}/>\r\n            <div className=\"top-menu-button unpressed-nyuryoku-shingou\" onClick={(e) => toggleNyuryokuShingou(e)}>入力信号: {isNyuryoku}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Tannikannsann = (props) => {\r\n    const [application, setApplication] = useState(\"ねじリード\")\r\n    const [bunkainou, setBunkainou] = useState(300)\r\n\r\n    const nyuryokuInput = useRef()\r\n    const shuturyokuInput = useRef()\r\n    const susumiInput = useRef()\r\n    const pulseText = useRef()\r\n\r\n    const getPulse = () => {\r\n        let kyori = 100\r\n        let nyuryoku = parseInt(nyuryokuInput.current.value.trim())\r\n        let shuturyoku = parseInt(shuturyokuInput.current.value.trim())\r\n        let susumiryou = parseInt(susumiInput.current.value.trim())\r\n        switch(application) {\r\n            case \"ねじリード\":\r\n                break;\r\n            default:\r\n                susumiryou = parseInt(susumiInput.current.value.trim()) * Math.PI\r\n        }\r\n        let pulse = kyori * (1/susumiryou) * parseInt(bunkainou) * (nyuryoku/shuturyoku)\r\n\r\n        // pulseText.current.innerText = pulse\r\n        props.closeTanni(props.topMenuRef, props.layerRef)\r\n    }\r\n\r\n    const getApplicationType = () => {\r\n        switch (application) {\r\n            case \"ボールねじ\":\r\n                return [\"ねじリード\", \"ねじリード\"]\r\n            case \"タイミングベルト\":\r\n                return [\"ブーリ直径\", \"ブーリ直径xπ\"]\r\n            case \"ラック&ピニオン\":\r\n                return [\"ピニオン直径\", \"ピニオン直径xπ\"]\r\n            default:\r\n                return [\"ねじリード\", \"ねじリード\"]\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tannikannsann-popup\">\r\n            <div className=\"close-popup close-tannikannsann\" onClick={() => props.closeTanni(props.topMenuRef, props.layerRef)}><i className=\"fas fa-times-circle\"></i></div>\r\n            <div className=\"tannikannsann-main\">\r\n                <div>\r\n                    <div className=\"select-bunnkainou\">\r\n                        <p>分解能: </p>\r\n                        <Dropdown setItem={setBunkainou} itemArr={[300, 600, 1000, 1200, 2000, 3000, 5000, 6000, 10000, 12000]} />\r\n                        <p>ppr</p>\r\n                    </div>\r\n                    <div className=\"type-gensoku-hiritu\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th></th>\r\n                                    <th>入力</th>\r\n                                    <th> : </th>\r\n                                    <th>出力</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td>減速比率: </td>\r\n                                    <td><input ref={nyuryokuInput} type=\"text\" className=\"nyu-shutu-input\"/></td>\r\n                                    <td></td>\r\n                                    <td><input ref={shuturyokuInput} type=\"text\" className=\"nyu-shutu-input\"/></td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div className=\"select-application\">\r\n                        <p>アプリケーション: </p>\r\n                        <Dropdown setItem={setApplication} itemArr={[\"ボールねじ\", \"タイミングベルト\", \"ラック&ピニオン\"]} />\r\n                    </div>\r\n                    <div className=\"type-susumi-ryou\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th></th>\r\n                                    <th></th>\r\n                                    <th></th>\r\n                                    <th>モータ1回転の進み量</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td>{getApplicationType()[0]}: </td>\r\n                                    <td><input ref={susumiInput} type=\"text\" className=\"susumi-ryou-input\"/></td>\r\n                                    <td>mm</td>\r\n                                    <td>{getApplicationType()[1]}</td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Button className=\"tannikannsann-ok\" variant=\"contained\" onClick={() => getPulse()}>OK</Button>\r\n            {/* <div>パルス　=　<p ref={pulseText}></p></div> */}\r\n            {/* <div className=\"pulse-formula-box\"> */}\r\n                {/* <p>パルス　=　距離[𝑚𝑚] × (1/進み量[𝑚𝑚⁄回転]) × 分解能[パルス/回転] × (入力/出力)</p> */}\r\n            {/* </div> */}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Dropdown = (props) => {\r\n    const itemArr = props.itemArr\r\n    const setItem = props.setItem\r\n\r\n    const [selectedItem, setSelectedItem] = useState(itemArr[0])\r\n\r\n    const dropdownItems = useRef()\r\n    const selectedItemRef = useRef()\r\n\r\n    const dropdowns = () => {\r\n        return itemArr.map(item => {\r\n            return (\r\n                <div className=\"dropdown-item unselectable\" onClick={(e) => clickItem(e)} key={item}>{item}</div>\r\n            )\r\n        })\r\n    }\r\n\r\n    const showItems = () => {\r\n        dropdownItems.current.style.display = \"block\"\r\n    }\r\n    \r\n    const clickItem = (e) => {\r\n        setSelectedItem(e.target.innerText)\r\n        dropdownItems.current.style.display = \"none\"\r\n        setItem(e.target.innerText)\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"dropdown-selector\">\r\n            <div ref={selectedItemRef} className=\"selected-item unselectable\" onClick={() => showItems()}>{selectedItem}<i className=\"fas fa-angle-down\"></i></div>\r\n            <div ref={dropdownItems} className=\"dropdown-items unselectable\">\r\n                {dropdowns()}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Button } from '@mui/material';\r\nimport React, { useRef, useState } from 'react';\r\nimport './App.css'\r\nimport './program-grid.css'\r\nimport { Editor } from './Editor';\r\nimport { ProgramBlock } from './programBlock';\r\nimport useLocalStorage from './useLocalStorage';\r\nimport { TopMenu, downloadFile } from './menu';\r\nimport { toCML } from './toCml';\r\n\r\nexport const App = () => {\r\n\r\n    const [cmlOutput, setCmlOutput] = useLocalStorage('CML', '')\r\n    const [isNyuryokuShingou, setIsNyuryokuShingou] = useState(false)\r\n    const [jiku, setJiku] = useState(3)\r\n    // const [programData, setProgramData] = useState([[[[]]]])\r\n    const [programData, setProgramData] = useState([\r\n        [\r\n            [[\"位置決め\", 1, [100, 100, 100]], [\"押付け\", 1, [100, 100, 100]], [\"位置決め\", 2, [100, 100, 100]]], \r\n            [[], [], [\"トルク制限\", 1, [100, 100, 100]]],\r\n            [[], [\"押付け\", 2, [100, 100, 100]], [\"トルク制限\", 3, [100, 100, 100]]],\r\n            [[], [\"押付け\", 3, [100, 100, 100]], [\"トルク制限\", 2, [100, 100, 100]]],\r\n        ],\r\n        [\r\n            [[], [\"タイマ\", 2, [100, 100, 100]], []]\r\n        ]\r\n    ])\r\n\r\n    const [loopData, setLoopData] = useState([[[\"0\",\"0\"], [\"0\",\"2\"], 4]])\r\n    const [currentDraggedCommand, setCurrentDraggedCommand] = useState(\"位置決め\")\r\n\r\n    const expCopy = useRef()\r\n    const expCopyDone = useRef()\r\n    const layerRef = useRef()\r\n    const commandSelectorRef = useRef()\r\n\r\n    const popMessage = (message) => {\r\n        const id = \"pop-message-\"+Date.now()\r\n        document.innerHTML += \r\n        <div id={id} className=\"pop-message message-success\">\r\n            <p className=\"message-text\">{message}</p>\r\n            <i className=\"fas fa-times\">agdsfdgfhkgjfhkdgsfa</i>\r\n        </div>\r\n        \r\n        setTimeout(() => {\r\n            document.querySelector(`#${id}`).remove()\r\n        }, 4000)\r\n    }\r\n\r\n    const getIndex = (document) => {\r\n        let res = document.id.split('-')\r\n        res.shift()\r\n        return res\r\n    }\r\n\r\n    // const commandDragStart = (e) => {\r\n    const commandHover = (e) => {\r\n        switch(e.target.id) {\r\n            case \"ichigime-selector\":\r\n                setCurrentDraggedCommand(\"位置決め\")\r\n                break\r\n            case \"oshituke-selector\":\r\n                setCurrentDraggedCommand(\"押付け\")\r\n                break\r\n            case \"toruku-selector\":\r\n                setCurrentDraggedCommand(\"トルク制限\")\r\n                break\r\n            case \"taima-selector\":\r\n                setCurrentDraggedCommand(\"タイマ\")\r\n                break\r\n            case \"kurikaeshi-selector\":\r\n                setCurrentDraggedCommand(\"繰り返し\")\r\n                break\r\n            case \"dousaGroup-selector\":\r\n                setCurrentDraggedCommand(\"動作グループを追加\")\r\n                break\r\n            default:\r\n                setCurrentDraggedCommand(\"NOPE\")\r\n                break\r\n        }\r\n        // this.className += ' hold';\r\n        // setTimeout(() => (this.className = 'invisible'), 0);\r\n    }\r\n    // function dragEnd() {\r\n    //     this.className = 'fill';\r\n    // }\r\n\r\n    const copyCML = (cml) => {\r\n        navigator.clipboard.writeText(cml);\r\n        expCopy.current.style.display = \"none\"\r\n        expCopyDone.current.style.display = \"block\"\r\n        setTimeout(() => {\r\n            expCopyDone.current.style.display = \"none\"\r\n        }, 2000)\r\n    }\r\n\r\n    const display = (ref) => {\r\n        ref.current.classList.add(\"shown\")\r\n        ref.current.classList.remove(\"hidden\")\r\n        setTimeout(() => {\r\n            if (!ref.current.classList.contains(\"hidden\")) {\r\n                ref.current.style.display = \"block\"\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const hide = (ref) => {\r\n        ref.current.classList.remove('shown')\r\n        ref.current.classList.add('hidden')\r\n        ref.current.style.display = \"none\"\r\n    }\r\n\r\n    const handleFileExport = () => {\r\n        const data = cmlOutput\r\n        const filename = \"CML-保存\"\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    return (\r\n        <div className=\"main\">\r\n            <div ref={layerRef} className=\"layer\"></div>\r\n            <div className=\"command-list-width-box\"></div>\r\n            <div className=\"command-list\">\r\n                <div onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"dousaGroup-selector\" draggable=\"true\">動作グループを追加</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"ichigime-selector\" draggable=\"true\">位置決め</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"oshituke-selector\" draggable=\"true\">押付け</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"toruku-selector\" draggable=\"true\">トルク制限</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"taima-selector\" draggable=\"true\">タイマ</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"kurikaeshi-selector\" draggable=\"true\">繰り返し</div>\r\n            </div>\r\n            <div className=\"center-section\">\r\n                <TopMenu programData={programData} setProgramData={setProgramData} loopData={loopData} setLoopData={setLoopData} layerRef={layerRef} cmlOutput={cmlOutput} setCmlOutput={setCmlOutput} isNyuryokuShingou={isNyuryokuShingou} setIsNyuryokuShingou={setIsNyuryokuShingou}/>\r\n                <ProgramBlock isNyuryokuShingou={isNyuryokuShingou} setCmlOutput={setCmlOutput} loopData={loopData} setLoopData={setLoopData} programData={programData} setProgramData={setProgramData} jiku={jiku} setJiku={setJiku} currentDraggedCommand={currentDraggedCommand} setCurrentDraggedCommand={setCurrentDraggedCommand}/>\r\n            </div>\r\n            <div className=\"cml-output-section\">\r\n                <h3 onClick={() => popMessage(\"FUCK OFF\")}>CML</h3>\r\n                <Editor value={cmlOutput} onChange={setCmlOutput} />\r\n                <div className=\"jikkou-button\">\r\n                    <Button variant=\"contained\" onClick={() => handleFileExport()}>\r\n                        テキストファイルにエクスポート\r\n                    </Button>\r\n                    <div className=\"copy-cml-container\">\r\n                        <div className=\"copy-cml\" onMouseEnter={() => display(expCopy)} onMouseLeave={() => hide(expCopy)} onClick={() => copyCML(cmlOutput)}><i className=\"fas fa-copy\"></i></div>\r\n                        <div ref={expCopy} className=\"exp-box exp-copy hidden\">コピー</div>\r\n                        <div ref={expCopyDone} className=\"exp-box exp-copy-done hidden\">コピーされました</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nconst PREFIX = 'CML-app-'\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n    const prefixedKey = PREFIX + key\r\n\r\n    const [value, setValue] = useState(() => {\r\n        const jsonValue = localStorage.getItem(prefixedKey)\r\n        if (jsonValue != null) return JSON.parse(jsonValue)\r\n        \r\n        if (typeof initialValue === 'function') {\r\n            return initialValue()\r\n        } else {\r\n            return initialValue\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }, [prefixedKey, value])\r\n\r\n    return [value, setValue] \r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}