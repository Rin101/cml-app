{"version":3,"sources":["Editor.js","toCml.js","sounds/決定、ボタン押下38.mp3","sounds/決定、ボタン押下44.mp3","programBlock.js","tanni-funcs.js","menu.js","App.js","useLocalStorage.js","index.js"],"names":["Editor","props","className","onBeforeChange","editor","data","value","onChange","options","lineWrapping","lint","lineNumbers","theme","toCML","programData","loopData","isNyuryokuShingou","tkData","output","every_data_teigi","every_program_teigi","dousa_group","indexOf","toString","dousa_jikkou_of_group","dousa_row","dousa_jikkou_row_arr","dousa","length","dousa_jiku","cml_numbers","tanniValue","getPulseValue","push","alert","loop_start","loop_end","loop","join","valueArr","divideVar","parseFloat","tanni","includes","Math","round","ProgramBlock","addRowRef","useRef","pgEmptyBox","useState","dousaNumArr","setDousaNumArr","trashInput","e","setProgramData","indexArr","target","parentNode","id","split","shift","tmp","trashJiku","currentTarget","index","jiku","splice","setJiku","tkTmp","setTkData","setLoopData","addRow","emptyRow","i","addJiku","kikou","susumiryou","gensoku","bunkai","moveRow","direction","dousaGroup","rowIndex","moveJiku","current_jiku","tmp_dousa","tmp_tk_item","showTypeData","isLoop","parentId","dousaType","dousaNum","setLoopInputObj","setInputBoxType","typeDataObj","setTypeDataObj","emptyBoxDragEnd","style","cursor","resizeLoop","mainItemIndex","forEach","isDirectionAvailable","rowLength","dousaBoxRef","pg_l_arr","main_grid","jiku_i","jiku_num","onClick","gridColumn","dousa_group_i","tmpLoop","trashGroup","dontPutEmp","dousa_row_i","loopCount","loopHeight","loopStyleHeight","z","dragArrows","loopId","height","map","dragArrow","trashLoop","onDragOver","currentDraggedCommand","preventDefault","emptyBoxLoopDragOver","onDragEnter","emptyBoxLoopDragEnter","onDragLeave","emptyBoxLoopDragLeave","onDrop","isMute","Audio","soundfile2","play","emptyBoxLoopDragDrop","ref","dousa_i","noValueArr","dousaId","jikuOfDousa","draggable","onDragStart","onDragEnd","onMouseEnter","setCurrentDraggedCommand","emptyBoxDragOver","emptyBoxDragEnter","emptyBoxDragLeave","audio","draggedIndexArr","tmpDousaNumArr","emptyBoxDragDrop","trashRow","addGroupDragOver","querySelector","display","addGroupDragEnter","addGroupDragLeave","emptyGroup","addGroupDragDrop","gridTemplateColumns","dataToHTML","Button","variant","setCmlOutput","TypeDataInDousa","popupRef","jikuNum","closeTypeData","subTanni","dataFormat","ichigimeData","bangouRange","inputForm","incrementalIchigimeData","oshitukeData","incrementalOshitukeData","DousaInputBox","inputLine","DataInput","tanniArr","isAllNumber","current","querySelectorAll","input","isNaN","inputs","tanniSelectors","setTypeData","setValue","tanniState","setTanniState","required","placeholder","defaultValue","LoopInputBox","WizardJiku","params","tannikannsannData","history","setInput","checkBoxRef","useEffect","num","checked","changeInput","isChecked","res","type","name","htmlFor","jikuCheckBoxContainer","isCheckedArr","checkBox","setHistory","setWizardInput","goNext","WizardKikou","jikuMainNum","radioRef","WizardSusumiryou","mode","susumiryouText","susumiryouVar","PI","Number","EPSILON","kikouValue","goBack","WizardGensoku","input1","setInput1","input2","setInput2","selectorRef","opacity","readOnly","handleToggle","WizardBunkai","bunkaiText","bunkaiVar","setItem","item","defaultItem","itemArr","n","digits","negative","undefined","multiplicator","pow","toFixed","roundTo","setTannikannsannData","close","goOK","Dropdown","selectedItem","setSelectedItem","dropdownItems","selectedItemRef","clickItem","innerText","TopMenu","topMenuRef","muteIconRef","handleFileSave","obj","filename","file","Blob","window","navigator","msSaveOrOpenBlob","a","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","downloadFile","JSON","stringify","classList","add","remove","contains","hide","isNyuryoku","muteIcon","expSave","expImp","expTanni","expNyuryoku","onMouseLeave","accept","reader","FileReader","onload","parse","result","readAsText","files","handleFileImport","layerRef","application","setApplication","setTanniValue","closeTanni","nyuryokuText","cmlOutput","tmpstr","replace","setIsNyuryokuShingou","toggleNyuryokuShingou","setIsMute","Tannikannsann","WizardController","wizardInput","App","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","useLocalStorage","initialTannikannsannData","Array","loopInputObj","inputBoxType","typeDataRef","loopInputRef","expCopy","expCopyDone","commandSelectorRef","commandDragStart","soundfile1","commandHover","handleFileExport","DataInputBox","isInitial","cml","clipboard","writeText","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e5113414.chunk.js","sourcesContent":["import React from 'react'\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/material.css'\r\nimport { Controlled as ControlledEditor } from 'react-codemirror2'\r\n\r\nexport const Editor = (props) => {\r\n\r\n    const handleChange = (editor, data, value) => {\r\n        props.onChange(value)\r\n    }\r\n\r\n    return(\r\n        <div className=\"cml-editor-container\">\r\n            <ControlledEditor \r\n                onBeforeChange={handleChange}\r\n                value={props.value}\r\n                className=\"cml-editor\"\r\n                options={{\r\n                    lineWrapping: true,\r\n                    lint: true,\r\n                    lineNumbers: true,\r\n                    theme: 'material'\r\n                }} \r\n            />\r\n        </div>\r\n    )\r\n}","export const toCML = (programData, loopData, isNyuryokuShingou, tkData) => {\r\n    let output = \"\"\r\n    let every_data_teigi = \"\"\r\n    let every_program_teigi = \"\"\r\n    for (let dousa_group of programData) {\r\n        let dousa_group_index = programData.indexOf(dousa_group) + 1\r\n        every_program_teigi += \"B\" + dousa_group_index.toString() + \".1\\n\"\r\n        let dousa_jikkou_of_group = \"\"\r\n        for (let dousa_row of dousa_group) {\r\n            let dousa_jikkou_row_arr = []\r\n            for (let dousa of dousa_row) {\r\n                if (dousa.length !== 0) {\r\n                    const dousa_jiku = dousa_row.indexOf(dousa) + 1\r\n                    let cml_numbers = dousa[1].toString() + \".\" + dousa_jiku.toString()\r\n                    const tanniValue = tkData[dousa_jiku-1].tanniValue\r\n                    switch (dousa[0]) {\r\n                        case \"位置決め\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+`\\n`\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}`)\r\n                            break\r\n                        case \"位置決め+\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+`\\n`\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}+`)\r\n                            break\r\n                        case \"押付け\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}`)\r\n                            break\r\n                        case \"押付け+\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}+`)\r\n                            break\r\n                        case \"タイマ\":\r\n                            every_data_teigi += \"T\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue).toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`T${cml_numbers}`)\r\n                            break\r\n                        default:\r\n                            alert('ERROR')\r\n                            break\r\n                    }\r\n                }\r\n            }\r\n            let loop_start = \"\"\r\n            let loop_end = \"\"\r\n            for (let loop of loopData) {\r\n                if (loop[0][0] === programData.indexOf(dousa_group).toString() && loop[0][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_start = `X${loop[2]}.1\\n`\r\n                }\r\n                if (loop[1][0] === programData.indexOf(dousa_group).toString() && loop[1][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_end = `X.1-\\n`\r\n                }\r\n            }\r\n            if (dousa_jikkou_row_arr.length >= 1) {\r\n                dousa_jikkou_of_group += loop_start + dousa_jikkou_row_arr.join(\",\") + \"\\n\" + loop_end\r\n            } else {\r\n                dousa_jikkou_of_group += loop_start + loop_end\r\n            }\r\n        }\r\n        every_program_teigi += dousa_jikkou_of_group\r\n    }\r\n    \r\n    output += every_data_teigi\r\n    output += every_program_teigi\r\n    if (isNyuryokuShingou) {\r\n        let nyuryokuTxt = `\\nK81=1\\nK82=1\\nL1.1\\nI1.1,JL2.1,T0.1\\nI2.1,JL3.1,T0.1\\nI3.1,JL4.1,T0.1\\nI4.1,].1:].1,T0.1\\nL2.1\\n[1.1\\nI1.1,W0.1,JL1.1\\nL3.1\\n[2.1\\nI2.1,W0.1,JL1.1\\nL4.1\\n[3.1\\nI3.1,W0.1,JL1.1\\nEND`\r\n        return output + \"END\" + nyuryokuTxt\r\n    } else {\r\n        return output + \"END\"\r\n    }\r\n}\r\n\r\nconst getPulseValue = (valueArr, tanniValue, divideVar=1) => {\r\n    let value = parseFloat(valueArr[0])\r\n    const tanni = valueArr[1]\r\n    if (tanni.includes(\"pps\") || tanni.includes(\"%\") || tanni.includes('msec')) {\r\n        return Math.round(value)\r\n    } else {\r\n        return Math.round(value * tanniValue / divideVar)\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/決定、ボタン押下38.47b42841.mp3\";","export default __webpack_public_path__ + \"static/media/決定、ボタン押下44.6471b8fa.mp3\";","import React, { useRef, useState } from 'react'\r\nimport { Button } from '@mui/material';\r\nimport { toCML } from './toCml';\r\nimport soundfile1 from './sounds/決定、ボタン押下38.mp3'\r\nimport soundfile2 from './sounds/決定、ボタン押下44.mp3'\r\n\r\nexport const ProgramBlock = (props) => {\r\n    const addRowRef = useRef()\r\n    const pgEmptyBox = useRef()\r\n\r\n    const [dousaNumArr, setDousaNumArr] = useState([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0])\r\n\r\n    const trashInput = (e, programData, setProgramData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = []\r\n        setProgramData(tmp) \r\n    }\r\n\r\n    const trashLoop = (e, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...loopData]\r\n        let index = -1\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                index = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        if (index !== -1) {\r\n            tmp.splice(index, 1);\r\n        }\r\n        setLoopData(tmp) \r\n    }\r\n\r\n    const trashRow = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp[parseFloat(indexArr[0])].length > 1) {\r\n            tmp[parseFloat(indexArr[0])].splice(parseFloat(indexArr[1]), 1);        \r\n        } else {\r\n            let emptyRow = []\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                emptyRow.push([])\r\n                i += 1\r\n            }\r\n            tmp[parseFloat(indexArr[0])] = [emptyRow]\r\n        }\r\n        // ------------------------------------\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                if (loop[1][1] === loop[0][1]) {\r\n                    tmpLoop.splice(tmpLoop.indexOf(loop), 1);\r\n                }\r\n            } else if (loop[1][0] === indexArr[0] && loop[1][1] === indexArr[1]) {\r\n                loop[1] = [indexArr[0], (parseFloat(indexArr[1])-1).toString()]\r\n            }\r\n        })\r\n\r\n        tmpLoop.forEach(loop => {\r\n            if ((programData[parseFloat(loop[0][0])].length - 1) < (loop[1][1] - parseFloat(loop[0][1]))) {\r\n                loop[1][1] = (parseFloat(loop[1][1])-1).toString()\r\n            }\r\n        })\r\n\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashGroup = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp.length > 1) {\r\n            tmp.splice(parseFloat(indexArr[0]), 1);\r\n        } else {\r\n            tmp = [[[]]]\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                tmp[0][0].push([])\r\n                i += 1\r\n            }\r\n        }\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0]) {\r\n                indexArr.push(tmpLoop.indexOf(loop))\r\n            }\r\n        })\r\n        let i = tmpLoop.length\r\n        while (i--) {\r\n            if (tmpLoop[i][0][0] === indexArr[0]) {\r\n                tmpLoop.splice(i, 1)\r\n            }\r\n        }\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashJiku = (e) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        const index = parseFloat(indexArr[0]) - 1\r\n        let tmp = [...props.programData]\r\n        if (props.jiku > 1) {\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    dousa_row.splice(index, 1)\r\n                }\r\n            }\r\n            props.setJiku(props.jiku - 1)\r\n            let tkTmp = [...props.tkData]\r\n            if (index > -1) {\r\n                tkTmp.splice(index, 1)\r\n            }\r\n            props.setTkData(tkTmp)\r\n        } else {\r\n            tmp = [[[[]]]]\r\n            props.setLoopData([])\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const addRow = (e) => {\r\n        const indexArr = e.currentTarget.id.split('-')\r\n        indexArr.shift()\r\n        let emptyRow = []\r\n        let i = 0\r\n        while (i <= props.jiku-1) {\r\n            emptyRow.push([])\r\n            i += 1\r\n        }\r\n        let tmp = [...props.programData]\r\n        tmp[parseFloat(indexArr[0])].splice(parseFloat(indexArr[1]), 0, emptyRow)\r\n        props.setProgramData(tmp) \r\n    }\r\n\r\n    const addJiku = (e) => {\r\n        if (props.jiku <= 14) {\r\n            const indexArr = e.currentTarget.id.split('-')\r\n            indexArr.shift()\r\n            let tmp = [...props.programData]\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    dousa_row.splice(parseFloat(indexArr[0])-1, 0, [])\r\n                }\r\n            }\r\n            props.setProgramData(tmp) \r\n            let tkTmp = [...props.tkData]\r\n            tkTmp.push({kikou: \"initial\", susumiryou: [1,1], gensoku: [1,1], bunkai: 300, tanniValue:1})\r\n            props.setTkData(tkTmp) \r\n            props.setJiku(props.jiku + 1)\r\n        } else {\r\n            alert(\"軸は最大で15軸設定できます。\")\r\n        }\r\n    }\r\n\r\n    const moveRow = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        const dousaGroup = tmp[parseFloat(indexArr[0])]\r\n        const rowIndex = parseFloat(indexArr[1])\r\n        switch (direction) {\r\n            case \"up\":\r\n                if (rowIndex >= 1) {\r\n                    [dousaGroup[rowIndex-1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex-1]]\r\n                }\r\n                break\r\n            case \"down\":\r\n                if (rowIndex < dousaGroup.length-1) {\r\n                    [dousaGroup[rowIndex+1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex+1]]\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const moveJiku = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let current_jiku = parseFloat(indexArr[0])\r\n        let tmp = [...props.programData]\r\n        let tkTmp = [...props.tkData]\r\n        switch (direction) {\r\n            case \"left\":\r\n                if (current_jiku !== 1) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku-2]]\r\n                            dousa_row[current_jiku-2] = tmp_dousa\r\n                        }\r\n                    }\r\n                    let tmp_tk_item = tkTmp[current_jiku-1]\r\n                    tkTmp[current_jiku-1] = tkTmp[current_jiku-2]\r\n                    tkTmp[current_jiku-2] = tmp_tk_item\r\n                } \r\n                break\r\n            case \"right\":\r\n                if (current_jiku !== props.jiku) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku]]\r\n                            dousa_row[current_jiku] = tmp_dousa\r\n                        }\r\n                    }\r\n                    let tmp_tk_item = tkTmp[current_jiku-1]\r\n                    tkTmp[current_jiku-1] = tkTmp[current_jiku]\r\n                    tkTmp[current_jiku] = tmp_tk_item\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setTkData(tkTmp) \r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const showTypeData = (isLoop, parentId, jiku, dousaType, dousaNum) => {\r\n        if (!isLoop) {\r\n            const typeDataObj = [jiku, parentId, dousaType, dousaNum, false]\r\n            props.setTypeDataObj(typeDataObj)\r\n            props.setInputBoxType(\"typedata\")\r\n        } else {\r\n            props.setLoopInputObj([parentId, false])\r\n            props.setInputBoxType(\"loop\")\r\n        }\r\n    }\r\n\r\n    // Drag Functions\r\n    const emptyBoxDragStart = (e) => {\r\n        // e.currentTarget.className += \"dousa-box\"\r\n        // setTimeout(() => (e.currentTarget.className = 'dragged-box'), 0);\r\n        // e.currentTarget.style.cursor = \"grabbing\"\r\n    }\r\n    \r\n    const emptyBoxDragEnd = (e) => {\r\n        e.currentTarget.className = \"dousa-box\"\r\n        e.currentTarget.style.cursor = \"grab\"\r\n    }\r\n\r\n    function emptyBoxDragOver(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragEnter(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-empty-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragLeave(e) {\r\n        e.target.className = 'pg-empty-box';\r\n    }\r\n\r\n    function emptyBoxDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        let audio = new Audio(soundfile2);\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\" && !props.currentDraggedCommand.includes(\"-\")) {\r\n            tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = [props.currentDraggedCommand, dousaNumArr[parseFloat(indexArr[2])]+1, [[\"数値を入力してください\", \"pps\"], [\"数値を入力してください\", \"pps\"], [\"数値を入力してください\", \"pps\"]]]\r\n            let tmpDousaNumArr = [...dousaNumArr]\r\n            tmpDousaNumArr[parseFloat(indexArr[2])] += 1\r\n            setDousaNumArr(tmpDousaNumArr)\r\n            props.setProgramData(tmp)\r\n            if (!props.isMute) {\r\n                audio.play();\r\n            }\r\n        } else if (props.currentDraggedCommand.includes(\"-\")) {\r\n            let draggedIndexArr = props.currentDraggedCommand.split(\"-\")\r\n            draggedIndexArr.shift()\r\n            tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = tmp[parseFloat(draggedIndexArr[0])][parseFloat(draggedIndexArr[1])][parseFloat(draggedIndexArr[2])]\r\n            tmp[parseFloat(draggedIndexArr[0])][parseFloat(draggedIndexArr[1])][parseFloat(draggedIndexArr[2])] = []\r\n            props.setProgramData(tmp)\r\n            if (!props.isMute) {\r\n                audio.play();\r\n            }\r\n        }\r\n    }\r\n    // -------\r\n    function emptyBoxLoopDragOver(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragEnter(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-l-empty-loop-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragLeave(e) {\r\n        e.target.className = 'pg-l-empty-loop';\r\n    }\r\n\r\n    function emptyBoxLoopDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            tmp.push([[indexArr[0], indexArr[1]], [indexArr[0], indexArr[1]], 2])\r\n            props.setLoopData(tmp)\r\n            if (!props.isMute) {\r\n                let audio = new Audio(soundfile2);\r\n                audio.play();\r\n            }\r\n        } \r\n    }\r\n\r\n    const resizeLoop = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        let mainItemIndex\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                mainItemIndex = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        let isDirectionAvailable = true\r\n        switch(direction) {\r\n            case \"top-up\":\r\n                tmp.forEach(loop => {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (loop[1][0] === tmp[mainItemIndex][0][0] && loop[1][1] === tmp[mainItemIndex][0][1])) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                })\r\n                if (isDirectionAvailable && parseFloat(tmp[mainItemIndex][0][1]) >= 1) {\r\n                    tmp[mainItemIndex][0][1] = (parseFloat(tmp[mainItemIndex][0][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"top-down\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][0][1] = (parseFloat(tmp[mainItemIndex][0][1]) + 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-up\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][1][1] = (parseFloat(tmp[mainItemIndex][1][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-down\":\r\n                for (let loop of tmp) {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (loop[0][0] === tmp[mainItemIndex][1][0] && loop[0][1] === tmp[mainItemIndex][1][1])) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                }\r\n                let rowLength = props.programData[tmp[mainItemIndex][1][0]].length\r\n                if (isDirectionAvailable && parseFloat(tmp[mainItemIndex][1][1]) < (rowLength - 1)) {\r\n                    tmp[mainItemIndex][1][1] = (parseFloat(tmp[mainItemIndex][1][1]) + 1).toString()\r\n                }\r\n                break          \r\n            default:\r\n                break \r\n        }\r\n        props.setLoopData(tmp)\r\n    }\r\n    // -------\r\n    function addGroupDragOver(e) {\r\n        if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function addGroupDragEnter(e) {\r\n        e.currentTarget.style.height = \"30px\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"flex\"\r\n    }\r\n    \r\n    function addGroupDragLeave(e) {\r\n        e.currentTarget.style.height = \"0.2rem\"\r\n    }\r\n    \r\n    function addGroupDragDrop(e) {\r\n        let tmp = [...props.programData]\r\n        if (tmp.length <= 29) {\r\n\r\n            const indexArr = e.currentTarget.id.split('-')\r\n            indexArr.shift()\r\n            if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n                let emptyGroup = [[]]\r\n                for (let z = 0; z < props.jiku; z++) emptyGroup[0].push([]);\r\n                tmp.splice((indexArr[0]+1), 0, emptyGroup); \r\n                props.setProgramData(tmp)\r\n            } \r\n            e.currentTarget.style.height = \"0.2rem\"\r\n        } else {\r\n            alert(\"動作グループは最大30まで設定できます。\")\r\n        }\r\n    }\r\n\r\n    const dousaBoxRef = useRef()\r\n\r\n    const dataToHTML = (programData) => {\r\n        let pg_l_arr = [<div className=\"pg-l-empty pglemp0\" key={\"first-pg-l-empty-box\"}></div>]\r\n        let main_grid = []\r\n        let jiku_i = 1\r\n        while (jiku_i <= props.jiku) {\r\n            const jiku_num = jiku_i\r\n            if (jiku_num === 1) {\r\n                main_grid.push(\r\n                <div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}>\r\n                    <div className=\"add-jiku-left\" id={\"addJiku-\"+jiku_num} onClick={(e) => addJiku(e)}>\r\n                        <div className=\"add-jiku-plus-cont\">\r\n                            <i className=\"fas fa-plus\"></i>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_num+1)} onClick={(e) => addJiku(e)}>\r\n                        <div className=\"add-jiku-plus-cont\">\r\n                            <i className=\"fas fa-plus\"></i>\r\n                        </div>\r\n                    </div>\r\n                    <i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i>\r\n                    <p>\r\n                        {jiku_num}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i>\r\n                    </p>\r\n                    <i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i>\r\n                </div>)\r\n            } else if (jiku_num === 15) {\r\n                main_grid.push(<div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>{jiku_num}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            } else {\r\n                main_grid.push(<div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}><div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_num+1)} onClick={(e) => addJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>{jiku_num}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            }\r\n            jiku_i += 1\r\n        }\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-0firrrst\"}></div>)\r\n        main_grid.push(<div className=\"grid-line\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"first-grid-line-key\"}></div>)\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-ggggllllliiinnneeee\"}></div>)\r\n        let dousa_group_i = 0\r\n        for (let dousa_group of programData) {\r\n            pg_l_arr.push(<div className=\"pg-l-empty pglempgroup\" key={\"pglempty\"+dousa_group_i}></div>)\r\n            main_grid.push(<div className=\"dousa-group-kaishi unselectable\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"dousagroup-\"+dousa_group_i} id={\"dousaGroup-\"+dousa_group_i}><p>動作グループ{dousa_group_i+1}の開始</p><i className=\"fas fa-trash\" onClick={(e) => trashGroup(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)}></i></div>)\r\n            main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i}></div>)\r\n            let dontPutEmp = []\r\n            let dousa_row_i = 0\r\n            for (let dousa_row of dousa_group) {\r\n                let loopCount\r\n                props.loopData.forEach(loop => {\r\n                    if (loop[0][0] === dousa_group_i.toString() && loop[0][1] === dousa_row_i.toString()) {\r\n                        loopCount = loop[2]\r\n                        let loopHeight = loop[1][1] - loop[0][1] + 1\r\n                        let loopStyleHeight = loopHeight * 2.3 + ((loopHeight-1) * (0.2 + 0.4))\r\n                        for (let z = 0; z < loopHeight; z++) dontPutEmp.push(\"loop\");\r\n                        let dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"top-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        if (loop[0][1] === loop[1][1]) {\r\n                            dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        }\r\n                        const loopId = \"loop-\"+dousa_group_i+\"-\"+dousa_row_i\r\n                        pg_l_arr.push(\r\n                        <div className=\"pg-l-loop unselectable\" style={{height:loopStyleHeight+\"rem\"}} id={loopId} key={\"pglloop\"+dousa_row}>\r\n                            {dragArrows.map(dragArrow => {return dragArrow})}\r\n                            <p className=\"loop-title\" onClick={() => showTypeData(true, loopId)}>繰り返し{loopCount}回</p>\r\n                            <i className=\"fas fa-trash trash-block\" onClick={(e) => trashLoop(e, props.loopData, props.setLoopData)}></i>\r\n                        </div>)\r\n                    }\r\n                })\r\n                if (dontPutEmp.length === 0) {\r\n                    pg_l_arr.push(<div className=\"pg-l-empty-loop\" id={\"emptyloop-\"+dousa_group_i+\"-\"+dousa_row_i} onDragOver={(e) => emptyBoxLoopDragOver(e)} onDragEnter={(e) => emptyBoxLoopDragEnter(e)} onDragLeave={(e) => emptyBoxLoopDragLeave(e)} onDrop={(e) => emptyBoxLoopDragDrop(e)} key={\"pglemploop-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    dontPutEmp.shift()\r\n                }\r\n                if (dousa_row_i === 0) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow0\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-0\"} onClick={(e) => addRow(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                let dousa_i = 0\r\n                for (let dousa of dousa_row) {\r\n                    if (dousa.length !== 0) {\r\n                        let noValueArr = []\r\n                        dousa[2].forEach(value => {if (value.includes(\"数値を入力してください\")) noValueArr.push(\"nope\")})\r\n                        const dousaId = \"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i\r\n                        const jikuOfDousa = dousa_i\r\n                        if (noValueArr.length > 0) {\r\n                            main_grid.push(<div ref={dousaBoxRef} className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={dousaId}><div className='no-value-circle'></div><p className='dousa-title' onClick={() => showTypeData(false, dousaId, jikuOfDousa, dousa[0], dousa[1])} >{dousa[0]}{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        } else {\r\n                            main_grid.push(<div ref={dousaBoxRef} className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={dousaId}><p className='dousa-title' onClick={() => showTypeData(false, dousaId, jikuOfDousa, dousa[0], dousa[1])} >{dousa[0]}{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        }\r\n                    } else {\r\n                        // main_grid.push(<div className=\"dousa-box\"></div>)\r\n                        main_grid.push(<div ref={pgEmptyBox} key={dousa_group_i+\"emptybox\"+dousa_row_i+\"-\"+dousa_i} onDragOver={(e) => emptyBoxDragOver(e)} onDragEnter={(e) => emptyBoxDragEnter(e)} onDragLeave={(e) => emptyBoxDragLeave(e)} onDrop={(e) => emptyBoxDragDrop(e)} className=\"pg-empty-box\" id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}></div>)\r\n                    } \r\n                    dousa_i += 1\r\n                }\r\n                main_grid.push(\r\n                    <div className=\"trash-row-right-box\" key={\"trashR-\"+dousa_group_i+\"-\"+dousa_row_i} id={\"trashRow-\"+dousa_group_i+\"-\"+(dousa_row_i)}>\r\n                        <i onClick={(e) => trashRow(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)} className=\"fas fa-trash\"></i>\r\n                        <div className='move-row-cont'><i className='fas fa-arrow-alt-circle-up move-row-up' onClick={(e) => moveRow(e, \"up\")}></i><i className='fas fa-arrow-alt-circle-down move-row-down' onClick={(e) => moveRow(e, \"down\")}></i></div>\r\n                    </div>)\r\n                if (dousa_row_i !== (dousa_group.length-1)) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} onDragOver={(e) => addGroupDragOver(e)} onDragEnter={(e) => addGroupDragEnter(e)} onDragLeave={(e) => addGroupDragLeave(e)} onDrop={(e) => addGroupDragDrop(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1),height:\"0.4rem\"}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                dousa_row_i += 1\r\n            }\r\n            dousa_group_i += 1\r\n        }\r\n\r\n        return (\r\n            <div className=\"program-grid\">\r\n                <div className=\"pg-left\">{pg_l_arr}</div>\r\n                <div className=\"program-main-grid\" style={{gridTemplateColumns:\"repeat(\"+props.jiku+\", 3fr) 1fr\"}}>{main_grid}</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // initially have 動作グループ1\r\n    return(\r\n        <div className=\"program-block\">\r\n            {dataToHTML(props.programData)}\r\n            <div className=\"enter-button\">\r\n                <Button variant=\"contained\" onClick={() => props.setCmlOutput(toCML(props.programData, props.loopData, props.isNyuryokuShingou, props.tkData))}>CMLへ変換</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const TypeDataInDousa = (props) => {\r\n    // let dousaType = props.dousaType\r\n    // let dousaNum = props.dousaNum\r\n    // let parentId = props.parentId\r\n    const popupRef = useRef()\r\n    const tkData = props.tkData\r\n    // --\r\n    let indexArr = props.parentId.split('-')\r\n    indexArr.shift()\r\n    const jikuNum = parseFloat(indexArr[2])\r\n    // -\r\n    let tmp = [...props.programData]\r\n    // --\r\n    const closeTypeData = () => {\r\n        props.setInputBoxType(\"none\")\r\n    }\r\n\r\n    let subTanni = \"initial\"\r\n    if (tkData[jikuNum].kikou !== \"initial\") {\r\n        if (tkData[jikuNum].kikou === \"インデックステーブル\") {\r\n            subTanni = \"°\"\r\n        } else {\r\n            subTanni = \"mm\"\r\n        }\r\n    }\r\n\r\n    const ichigimeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"速度データ\", [\"pps/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\"], \"で\"],\r\n            [\"位置データ\", [\"pps\"], \"へ移動する\"],\r\n        ] : [\r\n            [\"速度データ\", [\"pps/s\", subTanni+\"/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\", subTanni+\"/s\\u00b2\"], \"で\"],\r\n            [\"位置データ\", [\"pps\", subTanni], \"へ移動する\"],\r\n        ]\r\n    }\r\n    const incrementalIchigimeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"速度データ\", [\"pps/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\"], \"で\"],\r\n            [\"現在位置から\", [\"pps\"], \"移動する\"],\r\n        ] : [\r\n            [\"速度データ\", [\"pps/s\", subTanni+\"/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\", subTanni+\"/s\\u00b2\"], \"で\"],\r\n            [\"現在位置から\", [\"pps\", subTanni], \"移動する\"],\r\n        ]\r\n    }\r\n    const oshitukeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"速度データ\", [\"pps/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\"], \"で\"],\r\n            [\"位置データ\", [\"pps\"], \"へ押付け動作する\"],\r\n        ] : [\r\n            [\"速度データ\", [\"pps/s\", subTanni+\"/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\", subTanni+\"/s\\u00b2\"], \"で\"],\r\n            [\"位置データ\", [\"pps\", subTanni], \"へ押付け動作する\"],\r\n        ]\r\n    }\r\n    const incrementalOshitukeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"速度データ\", [\"pps/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\"], \"で\"],\r\n            [\"現在位置から\", [\"pps\"], \"押付け動作する\"],\r\n        ] : [\r\n            [\"速度データ\", [\"pps/s\", subTanni+\"/s\"], \"と\"],\r\n            [\"加速度データ\", [\"pps/s\\u00b2\", subTanni+\"/s\\u00b2\"], \"で\"],\r\n            [\"現在位置から\", [\"pps\", subTanni], \"押付け動作する\"],\r\n        ]\r\n    }\r\n    const timerData = {\r\n        bangouRange: 5,\r\n        inputForm: [\r\n            [\"タイマデータ\", [\"msec\"], \"に設定する\"],\r\n        ]\r\n    }\r\n\r\n    let dataFormat\r\n    switch(props.dousaType) {\r\n        case \"位置決め\":\r\n            dataFormat = ichigimeData\r\n            break\r\n        case \"押付け\":\r\n            dataFormat = oshitukeData\r\n            break\r\n        case \"タイマ\":\r\n            dataFormat = timerData\r\n            break\r\n        case \"位置決め+\":\r\n            dataFormat = incrementalIchigimeData\r\n            break\r\n        case \"押付け+\":\r\n            dataFormat = incrementalOshitukeData\r\n            break\r\n        default:\r\n            dataFormat = ichigimeData\r\n    }\r\n\r\n    const DousaInputBox = (props) => {\r\n        // props: dataFormat, numdropdown params\r\n        const dataFormat = props.dataFormat\r\n\r\n        const setTypeData = () => {\r\n            let isAllNumber = []\r\n            popupRef.current.querySelectorAll('.type-data-input').forEach(input => {\r\n                if (isNaN(parseFloat(input.value))) {\r\n                    isAllNumber.push(\"NAN\")\r\n                }\r\n            })\r\n            if (isAllNumber.length === 0) {\r\n                let tmp = [...props.programData]\r\n                let valueArr = []\r\n                let inputs = popupRef.current.querySelectorAll(\".type-data-input\")\r\n                let tanniSelectors = popupRef.current.querySelectorAll(\".select-tanni\")\r\n                let i = 0\r\n                while (i < inputs.length) {\r\n                    valueArr.push([inputs[i].value, tanniSelectors[i].value])\r\n                    i++\r\n                }\r\n                for (let dousa_group of tmp) {\r\n                    for (let dousa_row of dousa_group) {\r\n                        let dousa = dousa_row[props.jiku]\r\n                        if (dousa.length > 0) {\r\n                            // I don't get this code\r\n                            // if (props.dousaType !== (\"位置決め\"&&\"押付け\")) {\r\n                            // if (props.dousaType !== (\"位置決め\"||\"押付け\")) {\r\n                            //     if (dousa[1] === props.dousaNum && dousa[0] === props.dousaType) {\r\n                            //         dousa[2] = valueArr\r\n                            //     }\r\n                            // } else {\r\n                            //     if (dousa[1] === props.dousaNum) {\r\n                            //         dousa[2] = valueArr\r\n                            //     }\r\n                            // }\r\n                            if (dousa[1] === props.dousaNum && dousa[0] === props.dousaType) {\r\n                                dousa[2] = valueArr\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2] = valueArr\r\n                props.setProgramData(tmp)\r\n                // --\r\n                closeTypeData()\r\n            } else {\r\n                isAllNumber = []\r\n                alert('数値を入力してください') \r\n            }\r\n        } \r\n    \r\n        return (\r\n            <div className=\"typeDataInDousa\" ref={popupRef}>\r\n                <div className=\"close-typedata\"><i onClick={() => closeTypeData()} className=\"fas fa-times-circle type-times-circle\"></i></div>\r\n                <div className='typedata-input-line' key={\"input-num-line\"}>\r\n                    <p className='typedata-var'>番号:</p>\r\n                    <div className='current-num-container'><p className='current-num'>{ [...props.programData][parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][1] }</p></div>\r\n                </div>\r\n                { dataFormat.inputForm.map(inputLine => {\r\n                    return (\r\n                        <div className=\"typedata-input-line\" key={inputLine[0]}>\r\n                            <p className=\"typedata-var\">{inputLine[0]}</p>\r\n                            <DataInput index={dataFormat.inputForm.indexOf(inputLine)} tanniArr={inputLine[1]} />\r\n                            <p>{inputLine[2]}</p>\r\n                        </div>\r\n                    )\r\n                }) }\r\n                <Button className=\"type-data-button\" variant=\"contained\" onClick={() => setTypeData()}>OK</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const DataInput = (props) => {\r\n        // const data = [100, \"pps\"]\r\n        const index = props.index\r\n        const tanniArr = props.tanniArr\r\n        const [value, setValue] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2][index][0])\r\n        const [tanniState, setTanniState] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2][index][1])\r\n        // ---\r\n\r\n        return (\r\n            <>\r\n                {value.toString().includes('数値を入力してください') ? \r\n                    <input className=\"type-data-input\" required placeholder={value} onChange={(e) => setValue(e.target.value)} />\r\n                    // : <input className=\"type-data-input\" required value={value} onChange={(e) => setValue(e.target.value)} />\r\n                    : <input className=\"type-data-input\" required defaultValue={value} onChange={(e) => setValue(e.target.value)} />\r\n                }\r\n                <div className=\"type-data-tanni\">\r\n                    <select className='select-tanni' value={tanniState} onChange={(e) => setTanniState(e.target.value)} >\r\n                        { tanniArr.map(tanni => {\r\n                            return <option key={tanni} value={tanni}>{tanni}</option>\r\n                        }) }\r\n                    </select>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (<DousaInputBox dataFormat={dataFormat} jiku={props.jiku} dousaType={props.dousaType} dousaNum={props.dousaNum} popupRef={popupRef} programData={props.programData} setProgramData={props.setProgramData} indexArr={indexArr}/>)\r\n}\r\n\r\nexport const LoopInputBox = (props) => {\r\n    // props: parentId, loopData, setLoopData\r\n    const popupRef = useRef()\r\n    let indexArr = props.parentId.split('-')\r\n    indexArr.shift()\r\n    // --\r\n    let tmp = [...props.loopData]\r\n    const [value, setValue] = useState(tmp[parseFloat(indexArr[0])][2])\r\n    // --\r\n    const closeTypeData = () => {\r\n        props.setInputBoxType(\"none\")\r\n    }\r\n\r\n    const setTypeData = () => {\r\n        let isAllNumber = []\r\n        if (isNaN(popupRef.current.querySelector('.type-data-input').value)) {\r\n                isAllNumber.push(\"NAN\")\r\n        }\r\n        if (isAllNumber.length === 0) {\r\n            let tmp = [...props.loopData]\r\n            let value = popupRef.current.querySelector(\".type-data-input\").value\r\n            tmp[parseFloat(indexArr[0])][2] = value\r\n            props.setLoopData(tmp)\r\n            // --\r\n            closeTypeData()\r\n        } else {\r\n            isAllNumber = []\r\n            alert('数値を入力してください') \r\n        }\r\n    } \r\n\r\n    return (\r\n        <div className=\"typeDataInDousa\" ref={popupRef}>\r\n            <div className=\"close-typedata\"><i onClick={() => closeTypeData()} className=\"fas fa-times-circle type-times-circle\"></i></div>\r\n            <div className=\"typedata-input-line\">\r\n                <input className=\"type-data-input\" required value={value} onChange={(e) => setValue(e.target.value)} />\r\n                <p>回繰り返す</p>\r\n            </div>\r\n            <Button className=\"type-data-button\" variant=\"contained\" onClick={() => setTypeData()}>OK</Button>\r\n        </div>\r\n    )\r\n}","import { Button } from \"@mui/material\"\r\nimport { useEffect, useRef, useState } from \"react\"\r\n\r\n// ------------------------------------\r\nexport const WizardJiku = (props) => {\r\n\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const [input, setInput] = useState(params.history.length >= 1 ? params.history[0][1] : [])\r\n    const checkBoxRef = useRef()\r\n\r\n    useEffect(() => {\r\n        input.forEach(num => {\r\n            checkBoxRef.current.querySelector('#jiku-'+num).checked = true\r\n        })\r\n    }, [input])\r\n\r\n    const jikuCheckBoxContainer = () => {\r\n        let res = []\r\n        let i = 1\r\n        while (i<=params.jiku) {\r\n            const num = i\r\n            res.push(\r\n                <div className=\"jiku-input-container\" key={num+\"jiku-input\"}>\r\n                    <input type=\"checkbox\" key={num+\"input\"} onChange={(e) => changeInput(e, num)} id={\"jiku-\"+num} name=\"jiku-sentaku\"/>\r\n                    <label htmlFor={\"jiku-\"+num} key={num+\"label\"}>{num}軸目</label>\r\n                </div>\r\n            )\r\n            i += 1\r\n        }\r\n        return res\r\n    }\r\n\r\n    const changeInput = (e, num) => {\r\n        const isChecked = e.currentTarget.checked\r\n        let tmp = [...input]\r\n        if (isChecked && !input.includes(num)) {\r\n            tmp.push(num)\r\n        } else {\r\n            const index = tmp.indexOf(num);\r\n            if (index > -1) {\r\n                tmp.splice(index, 1);\r\n            }\r\n        }\r\n        setInput(tmp)\r\n    }\r\n\r\n    const goNext = () => {\r\n        let isCheckedArr = []\r\n        checkBoxRef.current.querySelectorAll('input').forEach(checkBox => {\r\n            if (checkBox.checked === true) {\r\n                isCheckedArr.push(\"true\")\r\n            }\r\n        })\r\n        if (isCheckedArr.length >= 1) {\r\n            let tmp = [...params.history]\r\n            if (tmp.length >= 1) {\r\n                tmp[0][1] = input\r\n            } else {\r\n                tmp.push([\"jiku\", input])\r\n            }\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"kikou\", input])\r\n        } else {\r\n            alert(\"軸を選択してください\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <p className=\"tanni-wizard-title\">軸の選択</p>\r\n            <div ref={checkBoxRef} className=\"tanni-wizard-selector tanni-jiku\">\r\n                {jikuCheckBoxContainer()}\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n// ------------------------------------\r\n\r\nexport const WizardKikou = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    const [input, setInput] = useState(params.history.length >= 2 ? params.history[1][1] : (tkData[jikuMainNum].kikou !== \"initial\" ? tkData[jikuMainNum].kikou : \"ボールねじ\"))\r\n    const radioRef = useRef()\r\n\r\n    useEffect(() => {\r\n        let arr = [\"ボールねじ\", \"ベルト駆動\", \"ラックアンドピニオン\", \"インデックステーブル\"]\r\n        let i = arr.indexOf(input) + 1\r\n        radioRef.current.querySelector('#kikou-'+i).checked = true\r\n    }, [input])\r\n\r\n    const goBack = () => {\r\n        params.setWizardInput([\"jiku\", params.history[0][1]])\r\n    }\r\n\r\n    const goNext = () => {\r\n        let isCheckedArr = []\r\n        radioRef.current.querySelectorAll('input').forEach(input => {\r\n            if (input.checked === true) {\r\n                isCheckedArr.push(\"true\")\r\n            }\r\n        })\r\n        if (isCheckedArr.length !== 1) {\r\n            alert('機構を選択してください')\r\n        } else {\r\n            let tmp = [...params.history]\r\n            if (params.history.length === 1) {\r\n                tmp.push([\"kikou\", input])\r\n                if (input !== \"インデックステーブル\") {\r\n                    params.setWizardInput([\"susumiryou\", input])\r\n                } else {\r\n                    tmp.push([\"susumiryou\", 360, 360])\r\n                    params.setWizardInput([\"gensoku\", input])\r\n                }\r\n            } else {\r\n                tmp[1] = [\"kikou\", input]\r\n                if (input !== \"インデックステーブル\") {\r\n                    params.setWizardInput([\"susumiryou\", input])\r\n                } else {\r\n                    tmp[2] = [\"susumiryou\", 1]\r\n                    params.setWizardInput([\"gensoku\", input])\r\n                }\r\n            }\r\n            params.setHistory(tmp)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <p className=\"tanni-wizard-title\">機構の選択</p>\r\n            <div ref={radioRef} className=\"tanni-wizard-selector tanni-kikou\">\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-1\" name=\"kikou-sentaku\" value=\"ボールねじ\"/>\r\n                    <label htmlFor=\"kikou-1\">ボールねじ</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-2\" name=\"kikou-sentaku\" value=\"ベルト駆動\" />\r\n                    <label htmlFor=\"kikou-2\">ベルト駆動</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-3\" name=\"kikou-sentaku\" value=\"ラックアンドピニオン\" />\r\n                    <label htmlFor=\"kikou-3\">ラックアンドピニオン</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-4\" name=\"kikou-sentaku\" value=\"インデックステーブル\" />\r\n                    <label htmlFor=\"kikou-4\">インデックステーブル</label>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardSusumiryou = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    const mode = params.history[1][1]\r\n    let susumiryouText = \"\"\r\n    let susumiryouVar = Math.PI\r\n    const [input, setInput] = useState((params.history.length >= 3) ? parseFloat(params.history[2][2]) : tkData[jikuMainNum].susumiryou[0])\r\n\r\n    switch (mode) {\r\n        case \"ボールねじ\":\r\n            susumiryouText = \"ボールねじリード\"\r\n            susumiryouVar = 1\r\n            break\r\n        case \"ベルト駆動\":\r\n            susumiryouText = \"プーリ直径\"\r\n            break\r\n        case \"ラックアンドピニオン\":\r\n            susumiryouText = \"ピニオン直径\"\r\n            break\r\n        default:\r\n            susumiryouText = \"ボールねじリード\"\r\n            break\r\n    }\r\n\r\n    const goNext = () => {\r\n        if (input !== \"\") {\r\n            let tmp = [...params.history]\r\n            if (params.history.length === 2) {\r\n                tmp.push([\"susumiryou\", Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100, parseFloat(input)])\r\n            } else {\r\n                tmp[2] = [\"susumiryou\", Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100, parseFloat(input)]\r\n            }\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"gensoku\", input])\r\n        } else {\r\n            alert('数値を入力してください')\r\n        }\r\n    }\r\n\r\n    const goBack = () => {\r\n        let tmp = [...params.history]\r\n        let kikouValue = tmp[1][1]\r\n        params.setWizardInput([\"kikou\", kikouValue])\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard\">\r\n            <p className=\"tanni-wizard-title unselectable\">モータ1回転あたりの進み量</p>\r\n            <div className=\"tanni-wizard-selector tanni-susumi\">\r\n                <div className=\"susumi-1\">\r\n                    <p className='tanni-susumi-p'>{susumiryouText} : </p>\r\n                    {(params.history.length <= 2 && tkData[jikuMainNum].susumiryou[0]===0) ? \r\n                    <input type=\"text\" placeholder={0} onChange={(e) => setInput(e.currentTarget.value)}/>\r\n                    : <input type=\"text\" value={input} onChange={(e) => setInput(e.currentTarget.value)}/>\r\n                    }\r\n                    <p className='tanni-susumi-tanni'> mm</p>\r\n                </div>\r\n                <div className=\"susumi-2\">\r\n                    <p className='tanni-susumi-p'>進み量 : <span>{Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100}</span> mm</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons unselectable\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardGensoku = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    // const [input, setInput] = useState((params.history.length >= 4) ? params.history[3][1] : tkData[jikuMainNum].gensoku)\r\n    const [input1, setInput1] = useState((params.history.length >= 4) ? params.history[3][1][0] : tkData[jikuMainNum].gensoku[0])\r\n    const [input2, setInput2] = useState((params.history.length >= 4) ? params.history[3][1][1] : tkData[jikuMainNum].gensoku[1])\r\n    const checkBoxRef = useRef()\r\n    const selectorRef = useRef()\r\n\r\n    useEffect(() => {\r\n        if (((params.history.length > 3) && (params.history[3][1][0] !== (1||\"\") || params.history[3][1][1] !== (1||\"\"))) || (tkData[jikuMainNum].gensoku[0]!==(1||\"\") || tkData[jikuMainNum].gensoku[1]!==(1||\"\"))) {\r\n            selectorRef.current.style.opacity = \"1\"\r\n            checkBoxRef.current.checked = \"true\"\r\n            selectorRef.current.querySelectorAll(\"input\").forEach(input => {\r\n                input.readOnly = false\r\n            })\r\n        }\r\n    })\r\n\r\n    const goNext = () => {\r\n        if ((input1 && input2) !== \"\") {\r\n            let tmp = [...params.history]\r\n            if (params.history.length === 3) {\r\n                tmp.push([\"gensoku\", [input1, input2]])\r\n            } else {\r\n                tmp[3] = [\"gensoku\", [input1, input2]]\r\n            }\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"bunkai\", [input1, input2]])\r\n        } else {\r\n            alert(\"数値を入力してください\")\r\n        }\r\n    }\r\n\r\n    const goBack = () => {\r\n        if (params.history[1][1] !== \"インデックステーブル\") {\r\n            params.setWizardInput([\"susumiryou\", 0])\r\n        } else {\r\n            params.setWizardInput([\"kikou\", 0])\r\n        }\r\n    }\r\n\r\n    const handleToggle = (e) => {\r\n        if (e.currentTarget.checked) {\r\n            selectorRef.current.style.opacity = \"1\"\r\n            selectorRef.current.querySelectorAll(\"input\").forEach(input => {\r\n                input.readOnly = false\r\n            })\r\n        } else {\r\n            setInput1(1)\r\n            setInput2(1)\r\n            selectorRef.current.style.opacity = \"0.4\"\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <div className=\"tanni-wizard-title gensoku-title\"><input ref={checkBoxRef} type=\"checkbox\" onChange={(e) => handleToggle(e)} />減速比率</div>\r\n            <div ref={selectorRef} className=\"tanni-wizard-selector gensoku-selector\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>入力</th>\r\n                            <th></th>\r\n                            <th>出力</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td><input type=\"text\" readOnly value={input1} onChange={(e) => setInput1(e.currentTarget.value)}/></td>\r\n                            <td>  :  </td>\r\n                            <td><input type=\"text\" readOnly value={input2} onChange={(e) => setInput2(e.currentTarget.value)}/></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardBunkai = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    const mode = params.history[1][1]\r\n    let bunkaiText = \"\"\r\n    let bunkaiVar = 1\r\n    const [input, setInput] = useState(params.history.length === 5 ? params.history[4][1] : tkData[jikuMainNum].bunkai)\r\n\r\n    switch (mode) {\r\n        case \"インデックステーブル\":\r\n            bunkaiText = \"°\"\r\n            bunkaiVar = 360 / (params.history[3][1][1]/params.history[3][1][0])\r\n            break\r\n        default:\r\n            bunkaiText = \"mm\"\r\n            bunkaiVar = params.history[2][1] / (params.history[3][1][1]/params.history[3][1][0])\r\n            break\r\n    }\r\n\r\n    const getTanniValue = () => {\r\n        return (1/parseFloat(params.history[2][1])) * parseFloat(input) * (parseFloat(params.history[3][1][1])/parseFloat(params.history[3][1][0]))\r\n    }\r\n\r\n    const goOK = () => {\r\n        let tkTmp = [...tkData]\r\n        params.history[0][1].forEach(jikuNum => {\r\n            tkTmp[jikuNum-1] = {kikou:params.history[1][1],susumiryou:[params.history[2][1],params.history[2][2]],gensoku:params.history[3][1],bunkai:input,tanniValue:getTanniValue()}\r\n        })\r\n        params.setTannikannsannData(tkTmp)\r\n        params.setHistory([])\r\n        props.close()\r\n    }\r\n\r\n    const goBack = () => {\r\n        params.setWizardInput([\"gensoku\", 0])\r\n    }\r\n\r\n    const changeInput = (item) => {\r\n        setInput(item)\r\n        let tmp = [...params.history]\r\n        if (tmp.length < 5) {\r\n            tmp.push([\"bunkai\", item])\r\n        } else {\r\n            tmp[4] = [\"bunkai\", item]\r\n        }\r\n        params.setHistory(tmp)\r\n    }\r\n\r\n    // decimal point function\r\n    function roundTo(n, digits) {\r\n        var negative = false;\r\n        if (digits === undefined) {\r\n            digits = 0;\r\n        }\r\n        if (n < 0) {\r\n            negative = true;\r\n            n = n * -1;\r\n        }\r\n        var multiplicator = Math.pow(10, digits);\r\n        n = parseFloat((n * multiplicator).toFixed(11));\r\n        n = (Math.round(n) / multiplicator).toFixed(digits);\r\n        if (negative) {\r\n            n = (n * -1).toFixed(digits);\r\n        }\r\n        return n;\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <p className=\"tanni-wizard-title\">最小位置決め単位</p>\r\n            <div className=\"tanni-wizard-selector tanni-bunkai\">\r\n                <div className=\"bunkai-1\">\r\n                    <p className=\"tanni-bunkai-text\">モータ分解能: </p>\r\n                    <Dropdown setItem={changeInput} defaultItem={input} itemArr={[300, 600, 1000, 1200, 2000, 3000, 5000, 6000, 10000, 12000]} />\r\n                    <p className=\"tanni-bunkai-text\">パルス/回転</p>\r\n                </div>\r\n                <div className=\"bunkai-2\">\r\n                    <p className=\"tanni-bunkai-text\">最小位置決め単位: <span>{roundTo(bunkaiVar/parseFloat(input) + Number.EPSILON, 5)}</span> {bunkaiText}</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-ok\" variant=\"contained\" onClick={() => goOK()}>OK</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Dropdown = (props) => {\r\n    const itemArr = props.itemArr\r\n    const setItem = props.setItem\r\n\r\n    const [selectedItem, setSelectedItem] = useState(props.defaultItem !== undefined ? props.defaultItem : itemArr[0])\r\n    const dropdownItems = useRef()\r\n    const selectedItemRef = useRef()\r\n\r\n    const dropdowns = () => {\r\n        return itemArr.map(item => {\r\n            return (\r\n                <div className=\"dropdown-item unselectable\" onClick={(e) => clickItem(e)} key={item}>{item}</div>\r\n            )\r\n        })\r\n    }\r\n\r\n    const showItems = () => {\r\n        dropdownItems.current.style.display = \"block\"\r\n    }\r\n    \r\n    const clickItem = (e) => {\r\n        setSelectedItem(e.target.innerText)\r\n        setItem(e.target.innerText)\r\n        dropdownItems.current.style.display = \"none\"\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"dropdown-selector\">\r\n            <div ref={selectedItemRef} className=\"selected-item unselectable\" onClick={() => showItems()}>{selectedItem}<i className=\"fas fa-angle-down\"></i></div>\r\n            <div ref={dropdownItems} className=\"dropdown-items unselectable\">\r\n                {dropdowns()}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useRef, useState } from 'react';\r\nimport { WizardGensoku, WizardKikou, WizardSusumiryou, WizardBunkai, WizardJiku } from './tanni-funcs';\r\nimport { toCML } from './toCml';\r\n\r\n// Function to download data to a file\r\nexport const downloadFile = (data, filename, type) => {\r\n    var file = new Blob([data], {type: type});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        let a = document.createElement(\"a\"),\r\n        url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nexport const TopMenu = (props) => {\r\n\r\n    const topMenuRef = useRef()\r\n    const muteIconRef = useRef()\r\n\r\n    const handleFileImport = (e) => {\r\n        const reader = new FileReader()\r\n        reader.onload = async (e) => { \r\n            // const obj = JSON.parse(e.target.result)\r\n            const obj = JSON.parse(reader.result)\r\n            // try {\r\n                props.setJiku(obj.data.jiku)\r\n                props.setTannikannsannData(obj.data.tannikannsannData)\r\n                props.setProgramData(obj.data.programData)\r\n                props.setLoopData(obj.data.loopData)\r\n                props.setCmlOutput(toCML(obj.data.programData, obj.data.loopData, obj.data.isNyuryokuShingou, obj.data.tannikannsannData))\r\n            // } catch (err) {\r\n            //     alert('ファイルが間違っています')\r\n            // }\r\n        };\r\n        reader.readAsText(e.target.files[0], \"utf-8\")\r\n    }\r\n\r\n    // Function to download data to a file\r\n    const downloadFile = (data, filename, type) => {\r\n        var file = new Blob([data], {type: type});\r\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n            window.navigator.msSaveOrOpenBlob(file, filename);\r\n        else { // Others\r\n            var a = document.createElement(\"a\"),\r\n            url = URL.createObjectURL(file);\r\n            a.href = url;\r\n            a.download = filename;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            setTimeout(function() {\r\n                document.body.removeChild(a);\r\n                window.URL.revokeObjectURL(url);  \r\n            }, 0); \r\n        }\r\n    }\r\n\r\n    const handleFileSave = () => {\r\n        let obj = {\"name\":\"cml-import\",\"data\":{\"jiku\":props.jiku,\"tannikannsannData\":props.tannikannsannData,\"programData\":props.programData,\"loopData\":props.loopData,\"isNyuryokuShingou\":props.isNyuryokuShingou}}\r\n        const data = JSON.stringify(obj)\r\n        const filename = \"CML-途中保存\"\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    const display = (ref) => {\r\n        ref.current.classList.add(\"shown\")\r\n        ref.current.classList.remove(\"hidden\")\r\n        setTimeout(() => {\r\n            if (!ref.current.classList.contains(\"hidden\")) {\r\n                ref.current.style.display = \"block\"\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const hide = (ref) => {\r\n        ref.current.classList.remove('shown')\r\n        ref.current.classList.add('hidden')\r\n        ref.current.style.display = \"none\"\r\n    }\r\n\r\n    const openTanni = () => {\r\n        topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"flex\"\r\n        props.layerRef.current.style.display = \"block\"\r\n    }\r\n\r\n    const closeTanni = (topMenuRef, layerRef) => {\r\n        topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"none\"\r\n        layerRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const toggleNyuryokuShingou = (e) => {\r\n        const nyuryokuText = `\\nK81=1\\nK82=1\\nL1.1\\nI1.1,JL2.1,T0.1\\nI2.1,JL3.1,T0.1\\nI3.1,JL4.1,T0.1\\nI4.1,].1:].1,T0.1\\nL2.1\\n[1.1\\nI1.1,W0.1,JL1.1\\nL3.1\\n[2.1\\nI2.1,W0.1,JL1.1\\nL4.1\\n[3.1\\nI3.1,W0.1,JL1.1\\nEND`\r\n\r\n        let isPressed = e.currentTarget.classList.contains(\"pressed-nyuryoku-shingou\")\r\n        if (isPressed) {\r\n            if (props.cmlOutput.includes(nyuryokuText)) {\r\n                let tmpstr = props.cmlOutput\r\n                props.setCmlOutput(tmpstr.replace(nyuryokuText,''))\r\n            }\r\n            e.currentTarget.classList.remove(\"pressed-nyuryoku-shingou\")\r\n            e.currentTarget.classList.add(\"unpressed-nyuryoku-shingou\")\r\n            props.setIsNyuryokuShingou(false)\r\n        } else {\r\n            if (!props.cmlOutput.includes(nyuryokuText)) {\r\n                let tmpstr = props.cmlOutput\r\n                props.setCmlOutput(tmpstr+nyuryokuText)\r\n            }\r\n            e.currentTarget.classList.remove(\"unpressed-nyuryoku-shingou\")\r\n            e.currentTarget.classList.add(\"pressed-nyuryoku-shingou\")\r\n            props.setIsNyuryokuShingou(true)\r\n        }\r\n    }\r\n\r\n    const toggleIsMute = (e) => {\r\n        let isPressed = muteIconRef.current.classList.contains(\"fa-volume-xmark\")\r\n        if (isPressed) {\r\n            muteIconRef.current.classList.remove(\"fa-volume-xmark\")\r\n            muteIconRef.current.classList.add(\"fa-volume-high\")\r\n            props.setIsMute(false)\r\n        } else {\r\n            muteIconRef.current.classList.remove(\"fa-volume-high\")\r\n            muteIconRef.current.classList.add(\"fa-volume-xmark\")\r\n            props.setIsMute(true)\r\n        }\r\n    }\r\n\r\n    const isNyuryoku = props.isNyuryokuShingou ? \"実行\" : \"停止\"\r\n    const muteIcon = props.isMute ? \"volume-xmark\" : \"volume-high\"\r\n    // --\r\n    const expSave = useRef() \r\n    const expImp = useRef() \r\n    const expTanni = useRef() \r\n    const expNyuryoku = useRef() \r\n\r\n    return (\r\n        <div ref={topMenuRef} className=\"top-menu\">\r\n            <div className=\"top-menu-button save-file unselectable\" onMouseEnter={() => display(expSave)} onMouseLeave={() => hide(expSave)} onClick={() => handleFileSave()}>\r\n                <i className=\"fa-solid fa-floppy-disk\"></i>プロジェクトファイルを保存\r\n                <div ref={expSave} className=\"exp-box hidden\">作成途中のプロジェクトを保存します</div>\r\n            </div>\r\n            \r\n            <div className=\"top-menu-button import-file unselectable\" onMouseEnter={() => display(expImp)} onMouseLeave={() => hide(expImp)}>\r\n                <label htmlFor=\"top-menu-file-upload\">\r\n                    <i className=\"fa-solid fa-folder-open\"></i>プロジェクトファイルを開く\r\n                    <input id=\"top-menu-file-upload\" accept=\".txt\" type=\"file\" onChange={(e) => handleFileImport(e)}/>\r\n                </label>\r\n                <div ref={expImp} className=\"exp-box hidden\">保存したプロジェクトを開きます</div>\r\n            </div>\r\n            <div className=\"top-menu-button tannikannsann unselectable\" onMouseEnter={() => display(expTanni)} onMouseLeave={() => hide(expTanni)} onClick={() => openTanni()}>\r\n                <i className=\"fa-solid fa-gears\"></i>単位換算\r\n                <div ref={expTanni} className=\"exp-box hidden\">表示単位と分解能を設定します</div>\r\n            </div>\r\n            <Tannikannsann jiku={props.jiku} tannikannsannData={props.tannikannsannData} setTannikannsannData={props.setTannikannsannData} application={props.application} setApplication={props.setApplication} tanniValue={props.tanniValue} setTanniValue={props.setTanniValue} layerRef={props.layerRef} topMenuRef={topMenuRef} closeTanni={closeTanni}/>\r\n            <div className=\"top-menu-button unpressed-nyuryoku-shingou unselectable\" onMouseEnter={() => display(expNyuryoku)} onMouseLeave={() => hide(expNyuryoku)} onClick={(e) => toggleNyuryokuShingou(e)}>\r\n            {/* <div className={\"top-menu-button unpressed-nyuryoku-shingou \"+} onMouseEnter={() => display(expNyuryoku)} onMouseLeave={() => hide(expNyuryoku)} onClick={(e) => toggleNyuryokuShingou(e)}> */}\r\n                <i className=\"fa-solid fa-rotate\"></i>入力点からの{isNyuryoku}\r\n                <div ref={expNyuryoku} className=\"exp-box hidden\">入力点1～3の機能を動作グループ1～3の実行に、入力点4を停止に割付けます。</div>\r\n            </div>\r\n            <div className='top-menu-button mute-button unselectable' onClick={(e) => toggleIsMute(e)}>\r\n                <i ref={muteIconRef} className={\"fa-solid fa-\"+muteIcon}></i>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Tannikannsann = (props) => {\r\n    // props: tanniValue, setTanniValue, application, setApplication, tannikannsannData, setTannikannsannData\r\n    \r\n    const close = () => {\r\n        props.closeTanni(props.topMenuRef, props.layerRef)\r\n    }\r\n    \r\n    const WizardController = (props) => {\r\n        const [history, setHistory] = useState([])\r\n        const [wizardInput, setWizardInput] = useState([\"jiku\", []])\r\n\r\n        const inputForm = () => {\r\n            const params = {\r\n                wizardInput: wizardInput[1], \r\n                history, setHistory, setWizardInput,\r\n                tannikannsannData: props.tannikannsannData, setTannikannsannData: props.setTannikannsannData,\r\n                jiku: props.jiku\r\n            }\r\n        \r\n            switch (wizardInput[0]) {\r\n                case \"jiku\":\r\n                    return <WizardJiku params={params} />\r\n                case \"kikou\":\r\n                    return <WizardKikou params={params} />\r\n                case \"susumiryou\":\r\n                    return <WizardSusumiryou params={params} />\r\n                case \"gensoku\":\r\n                    return <WizardGensoku params={params} />\r\n                case \"bunkai\":\r\n                    return <WizardBunkai close={props.close} params={params} />\r\n                default:\r\n                    return <WizardKikou params={params}/>\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className='wizard-controller'>\r\n                    {inputForm()}\r\n            </div>\r\n        )\r\n    } \r\n\r\n    return (\r\n        <div className=\"tannikannsann-popup\">\r\n            <div className=\"close-popup close-tannikannsann\" onClick={() => close()}><i className=\"fas fa-times-circle\"></i></div>\r\n            <WizardController close={close} jiku={props.jiku} tannikannsannData={props.tannikannsannData} setTannikannsannData={props.setTannikannsannData} />\r\n        </div>\r\n    )\r\n}\r\n","import { Button } from '@mui/material';\r\nimport React, { useRef, useState } from 'react';\r\nimport './App.css'\r\nimport './program-grid.css'\r\nimport { Editor } from './Editor';\r\nimport { ProgramBlock, TypeDataInDousa, LoopInputBox } from './programBlock';\r\nimport useLocalStorage from './useLocalStorage';\r\nimport { TopMenu, downloadFile } from './menu';\r\nimport soundfile1 from './sounds/決定、ボタン押下38.mp3'\r\nimport soundfile2 from './sounds/決定、ボタン押下44.mp3'\r\n\r\nexport const App = () => {\r\n\r\n    const [cmlOutput, setCmlOutput] = useLocalStorage('CML', '')\r\n    const [isNyuryokuShingou, setIsNyuryokuShingou] = useState(false)\r\n    // const [isNyuryokuShingou, setIsNyuryokuShingou] = useLocalStorage(\"nyuryokushingou\", false)\r\n    const [isMute, setIsMute] = useState(false)\r\n    const [jiku, setJiku] = useState(1)\r\n    let initialTannikannsannData = []\r\n    for (let i=0; i < jiku; i++) {\r\n        initialTannikannsannData.push({kikou: \"initial\", susumiryou: [1,1], gensoku: [1,1], bunkai: 300, tanniValue:1})\r\n    }\r\n    const [tannikannsannData, setTannikannsannData] = useState(initialTannikannsannData)\r\n    // const [programData, setProgramData] = useState([[[[\"位置決め\", 1, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]],[],[]],[[],[],[]],[[],[],[]]]])\r\n    const [programData, setProgramData] = useState([[[[\"位置決め\", 1, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]]],[[]],[[]]]])\r\n    const [loopData, setLoopData] = useState([])\r\n    const [currentDraggedCommand, setCurrentDraggedCommand] = useState(\"位置決め\")\r\n\r\n    // typeDataObj: [jiku, parentId, dousaType, dousaNum, isInitial]\r\n    // loopInputObj: [parentId, isInitial]\r\n    const [typeDataObj, setTypeDataObj] = useState(new Array(5))\r\n    const [loopInputObj, setLoopInputObj] = useState(new Array(2))\r\n    const [inputBoxType, setInputBoxType] = useState(\"none\")\r\n\r\n    const typeDataRef = useRef()\r\n    const loopInputRef = useRef()\r\n    const expCopy = useRef()\r\n    const expCopyDone = useRef()\r\n    const layerRef = useRef()\r\n    const commandSelectorRef = useRef()\r\n\r\n    // const getIndex = (document) => {\r\n    //     let res = document.id.split('-')\r\n    //     res.shift()\r\n    //     return res\r\n    // }\r\n\r\n    const commandDragStart = (e) => {\r\n        if (!isMute) {\r\n            let audio = new Audio(soundfile1);\r\n            audio.play();\r\n        }\r\n    }\r\n\r\n    const commandHover = (e) => {\r\n        switch(e.target.id) {\r\n            case \"ichigime-selector\":\r\n                setCurrentDraggedCommand(\"位置決め\")\r\n                break\r\n            case \"oshituke-selector\":\r\n                setCurrentDraggedCommand(\"押付け\")\r\n                break\r\n            case \"taima-selector\":\r\n                setCurrentDraggedCommand(\"タイマ\")\r\n                break\r\n            case \"incremental-ichigime-selector\":\r\n                setCurrentDraggedCommand(\"位置決め+\")\r\n                break\r\n            case \"incremental-oshituke-selector\":\r\n                setCurrentDraggedCommand(\"押付け+\")\r\n                break\r\n            case \"kurikaeshi-selector\":\r\n                setCurrentDraggedCommand(\"繰り返し\")\r\n                break\r\n            case \"dousaGroup-selector\":\r\n                setCurrentDraggedCommand(\"動作グループを追加\")\r\n                break\r\n            default:\r\n                setCurrentDraggedCommand(\"NOPE\")\r\n                break\r\n        }\r\n        // this.className += ' hold';\r\n        // setTimeout(() => (this.className = 'invisible'), 0);\r\n    }\r\n    // function dragEnd() {\r\n    //     this.className = 'fill';\r\n    // }\r\n\r\n    const copyCML = (cml) => {\r\n        navigator.clipboard.writeText(cml);\r\n        expCopy.current.style.display = \"none\"\r\n        expCopyDone.current.style.display = \"block\"\r\n        setTimeout(() => {\r\n            expCopyDone.current.style.display = \"none\"\r\n        }, 2000)\r\n    }\r\n\r\n    const display = (ref) => {\r\n        ref.current.classList.add(\"shown\")\r\n        ref.current.classList.remove(\"hidden\")\r\n        setTimeout(() => {\r\n            if (!ref.current.classList.contains(\"hidden\")) {\r\n                ref.current.style.display = \"block\"\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const hide = (ref) => {\r\n        ref.current.classList.remove('shown')\r\n        ref.current.classList.add('hidden')\r\n        ref.current.style.display = \"none\"\r\n    }\r\n\r\n    const handleFileExport = () => {\r\n        const data = cmlOutput\r\n        const filename = \"CML-保存\"\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    const DataInputBox = (props) => {\r\n        switch (props.inputBoxType) {\r\n            case \"typedata\":\r\n                return <TypeDataInDousa tkData={tannikannsannData} setInputBoxType={setInputBoxType} isInitial={typeDataObj[4]} jiku={typeDataObj[0]} parentId={typeDataObj[1]} dousaType={typeDataObj[2]} dousaNum={typeDataObj[3]} programData={programData} setProgramData={setProgramData}/>\r\n            case \"loop\":\r\n                return <LoopInputBox setInputBoxType={setInputBoxType} isInitial={loopInputObj[1]} parentId={loopInputObj[0]} loopData={loopData} setLoopData={setLoopData} />\r\n            default:\r\n                return <></>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"main\">\r\n            <DataInputBox inputBoxType={inputBoxType} />\r\n            <div ref={layerRef} className=\"layer\"></div>\r\n            <div className=\"command-list-width-box\"></div>\r\n            <div className='command-list-container'>\r\n                <div className=\"command-list\">\r\n                    <div onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"dousaGroup-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>動作グループを追加</div>\r\n                    <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"ichigime-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>位置決め</div>\r\n                    <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"oshituke-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>押付け</div>\r\n                    <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"taima-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>タイマ</div>\r\n                    <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"kurikaeshi-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>繰り返し</div>\r\n                    <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"incremental-ichigime-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>位置決め+</div>\r\n                    <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"incremental-oshituke-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>押付け+</div>\r\n                </div>\r\n            </div>\r\n            <div className=\"center-section\">\r\n                <div className='top-menu-container'>\r\n                    <TopMenu isMute={isMute} setIsMute={setIsMute} tannikannsannData={tannikannsannData} setTannikannsannData={setTannikannsannData} programData={programData} setProgramData={setProgramData} loopData={loopData} setLoopData={setLoopData} layerRef={layerRef} cmlOutput={cmlOutput} setCmlOutput={setCmlOutput} isNyuryokuShingou={isNyuryokuShingou} setIsNyuryokuShingou={setIsNyuryokuShingou} jiku={jiku} setJiku={setJiku}/>\r\n                </div>\r\n                <div className='main-interface-section'>\r\n                    <div className='program-block-container'>\r\n                        <ProgramBlock isMute={isMute} tkData={tannikannsannData} setTkData={setTannikannsannData} setInputBoxType={setInputBoxType} inputBoxType={inputBoxType} loopInputObj={loopInputObj} setLoopInputObj={setLoopInputObj} typeDataObj={typeDataObj} setTypeDataObj={setTypeDataObj} typeDataRef={typeDataRef} loopInputRef={loopInputRef} isNyuryokuShingou={isNyuryokuShingou} setCmlOutput={setCmlOutput} loopData={loopData} setLoopData={setLoopData} programData={programData} setProgramData={setProgramData} jiku={jiku} setJiku={setJiku} currentDraggedCommand={currentDraggedCommand} setCurrentDraggedCommand={setCurrentDraggedCommand}/>\r\n                    </div>\r\n                    <div className='cml-output-container'>\r\n                        <div className=\"cml-output-section\">\r\n                            <h3 className='unselectable'>CML</h3>\r\n                            <Editor value={cmlOutput} onChange={setCmlOutput} />\r\n                            <div className=\"jikkou-button\">\r\n                                <Button variant=\"contained\" onClick={() => handleFileExport()}>\r\n                                    テキストファイルに<br/>エクスポート\r\n                                </Button>\r\n                                <div className=\"copy-cml-container\">\r\n                                    <div className=\"copy-cml\" onMouseEnter={() => display(expCopy)} onMouseLeave={() => hide(expCopy)} onClick={() => copyCML(cmlOutput)}><i className=\"fas fa-copy\"></i></div>\r\n                                    <div ref={expCopy} className=\"exp-copy hidden\">コピー</div>\r\n                                    <div ref={expCopyDone} className=\"exp-copy-done hidden\">コピーされました</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {/* <div className=\"center-section\">\r\n                <TopMenu tannikannsannData={tannikannsannData} setTannikannsannData={setTannikannsannData} programData={programData} setProgramData={setProgramData} loopData={loopData} setLoopData={setLoopData} layerRef={layerRef} cmlOutput={cmlOutput} setCmlOutput={setCmlOutput} isNyuryokuShingou={isNyuryokuShingou} setIsNyuryokuShingou={setIsNyuryokuShingou} jiku={jiku} setJiku={setJiku}/>\r\n                <ProgramBlock tkData={tannikannsannData} setInputBoxType={setInputBoxType} inputBoxType={inputBoxType} loopInputObj={loopInputObj} setLoopInputObj={setLoopInputObj} typeDataObj={typeDataObj} setTypeDataObj={setTypeDataObj} typeDataRef={typeDataRef} loopInputRef={loopInputRef} isNyuryokuShingou={isNyuryokuShingou} setCmlOutput={setCmlOutput} loopData={loopData} setLoopData={setLoopData} programData={programData} setProgramData={setProgramData} jiku={jiku} setJiku={setJiku} currentDraggedCommand={currentDraggedCommand} setCurrentDraggedCommand={setCurrentDraggedCommand}/>\r\n            </div>\r\n            <div className=\"cml-output-section\">\r\n                <h3 className='unselectable'>CML</h3>\r\n                <Editor value={cmlOutput} onChange={setCmlOutput} />\r\n                <div className=\"jikkou-button\">\r\n                    <Button variant=\"contained\" onClick={() => handleFileExport()}>\r\n                        テキストファイルにエクスポート\r\n                    </Button>\r\n                    <div className=\"copy-cml-container\">\r\n                        <div className=\"copy-cml\" onMouseEnter={() => display(expCopy)} onMouseLeave={() => hide(expCopy)} onClick={() => copyCML(cmlOutput)}><i className=\"fas fa-copy\"></i></div>\r\n                        <div ref={expCopy} className=\"exp-copy hidden\">コピー</div>\r\n                        <div ref={expCopyDone} className=\"exp-copy-done hidden\">コピーされました</div>\r\n                    </div>\r\n                </div>\r\n            </div> */}\r\n        </div>\r\n    )\r\n}","import { useEffect, useState } from \"react\"\r\n\r\nconst PREFIX = 'CML-app-'\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n    const prefixedKey = PREFIX + key\r\n\r\n    const [value, setValue] = useState(() => {\r\n        const jsonValue = localStorage.getItem(prefixedKey)\r\n        if (jsonValue != null) return JSON.parse(jsonValue)\r\n        \r\n        if (typeof initialValue === 'function') {\r\n            return initialValue()\r\n        } else {\r\n            return initialValue\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }, [prefixedKey, value])\r\n\r\n    return [value, setValue] \r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}