{"version":3,"sources":["Editor.js","toCml.js","tanni-funcs.js","programBlock.js","menu.js","App.js","useLocalStorage.js","index.js"],"names":["Editor","props","className","onBeforeChange","editor","data","value","onChange","options","lineWrapping","lint","lineNumbers","theme","toCML","programData","loopData","isNyuryokuShingou","output","every_data_teigi","every_program_teigi","dousa_group","indexOf","toString","dousa_jikkou_of_group","dousa_row","dousa_jikkou_row_arr","dousa","length","dousa_jiku","cml_numbers","push","alert","loop_start","loop_end","loop","join","WizardKikou","params","useState","wizardInput","input","setInput","type","onClick","e","currentTarget","id","name","htmlFor","Button","variant","tmp","history","setHistory","setWizardInput","goNext","WizardSusumiryou","mode","susumiryouText","changeInput","index","placeholder","kikouValue","goBack","WizardGensoku","previousMove","splice","WizardHyouji","defaultChecked","WizardBunkai","bunkaiText","setItem","itemArr","setTanniValue","getPulse","goOK","Dropdown","selectedItem","setSelectedItem","dropdownItems","useRef","selectedItemRef","clickItem","target","innerText","current","style","display","ref","map","item","ProgramBlock","addRowRef","pgEmptyBox","trashInput","setProgramData","indexArr","parentNode","split","shift","parseInt","trashJiku","jiku","setJiku","setLoopData","addRow","emptyRow","i","showOnHover","backgroundColor","querySelector","hideOnLeave","addJiku","showOnHoverJiku","hideOnLeaveJiku","moveRow","direction","dousaGroup","rowIndex","moveJiku","current_jiku","console","log","tmp_dousa","showTypeData","emptyBoxDragEnd","emptyBoxDragOver","currentDraggedCommand","preventDefault","emptyBoxDragEnter","emptyBoxDragLeave","emptyBoxDragDrop","includes","draggedIndexArr","resizeLoop","mainItemIndex","forEach","isDirectionAvailable","rowLength","pg_l_arr","main_grid","jiku_i","onMouseEnter","onMouseLeave","gridColumn","dousa_group_i","tmpLoop","trashGroup","dontPutEmp","dousa_row_i","loopCount","loopHeight","loopStyleHeight","z","dragArrows","height","dragArrow","trashLoop","onDragOver","emptyBoxLoopDragOver","onDragEnter","emptyBoxLoopDragEnter","onDragLeave","emptyBoxLoopDragLeave","onDrop","emptyBoxLoopDragDrop","dousa_i","draggable","onDragStart","onDragEnd","setCurrentDraggedCommand","parentId","dousaType","dousaNum","trashRow","addGroupDragOver","addGroupDragEnter","addGroupDragLeave","emptyGroup","addGroupDragDrop","gridTemplateColumns","dataToHTML","setCmlOutput","TypeDataInDousa","popupRef","closeTypeData","DataInput","tanni","setValue","tanniState","setTanniState","required","dataNum","isAllNumber","querySelectorAll","isNaN","valueArr","inputs","tanniSelectors","setTypeData","NumDropDown","currentNum","setCurrentNum","numItemRef","currentNumRef","selectItem","sameDataArr","isItemsShown","showItems","res","getNumItems","TopMenu","topMenuRef","handleFileSave","obj","filename","file","Blob","window","navigator","msSaveOrOpenBlob","a","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","downloadFile","JSON","stringify","isNyuryoku","accept","reader","FileReader","onload","parse","result","err","readAsText","files","handleFileImport","layerRef","tanniValue","closeTanni","nyuryokuText","classList","contains","cmlOutput","tmpstr","replace","remove","add","setIsNyuryokuShingou","toggleNyuryokuShingou","Tannikannsann","application","bunkainou","nyuryokuInput","shuturyokuInput","susumiInput","nyuryoku","trim","shuturyoku","susumiryou","Math","PI","WizardController","useEffect","inputForm","App","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","useLocalStorage","expCopy","expCopyDone","commandSelectorRef","commandHover","handleFileExport","message","Date","now","innerHTML","popMessage","cml","clipboard","writeText","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.05f45fcf.chunk.js","sourcesContent":["import React from 'react'\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/material.css'\r\nimport { Controlled as ControlledEditor } from 'react-codemirror2'\r\n\r\nexport const Editor = (props) => {\r\n\r\n    const handleChange = (editor, data, value) => {\r\n        props.onChange(value)\r\n    }\r\n\r\n    return(\r\n        <div className=\"cml-editor-container\">\r\n            <ControlledEditor \r\n                onBeforeChange={handleChange}\r\n                value={props.value}\r\n                className=\"cml-editor\"\r\n                options={{\r\n                    lineWrapping: true,\r\n                    lint: true,\r\n                    lineNumbers: true,\r\n                    theme: 'material'\r\n                }} \r\n            />\r\n        </div>\r\n    )\r\n}","export const toCML = (programData, loopData, isNyuryokuShingou) => {\r\n    let output = \"\"\r\n    let every_data_teigi = \"\"\r\n    let every_program_teigi = \"\"\r\n    for (let dousa_group of programData) {\r\n        let dousa_group_index = programData.indexOf(dousa_group) + 1\r\n        every_program_teigi += \"B\" + dousa_group_index.toString() + \"\\n\"\r\n        let dousa_jikkou_of_group = \"\"\r\n        for (let dousa_row of dousa_group) {\r\n            let dousa_jikkou_row_arr = []\r\n            for (let dousa of dousa_row) {\r\n                if (dousa.length !== 0) {\r\n                    let dousa_jiku = dousa_row.indexOf(dousa) + 1\r\n                    let cml_numbers = dousa[1].toString() + \".\" + dousa_jiku.toString()\r\n                    switch (dousa[0]) {\r\n                        case \"位置決め\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\nA\"+cml_numbers+\"=\"+dousa[2][1].toString()+\"\\nP\"+cml_numbers+\"=\"+dousa[2][2].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}`)\r\n                            break\r\n                        case \"押付け\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\nA\"+cml_numbers+\"=\"+dousa[2][1].toString()+\"\\nP\"+cml_numbers+\"=\"+dousa[2][2].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}`)\r\n                            break\r\n                        case \"トルク制限\":\r\n                            every_data_teigi += \"M\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`M${cml_numbers}`)\r\n                            break\r\n                        case \"タイマ\":\r\n                            every_data_teigi += \"T\"+cml_numbers+\"=\"+dousa[2][0].toString()+\"\\n\"\r\n                            dousa_jikkou_row_arr.push(`T${cml_numbers}`)\r\n                            break\r\n                        default:\r\n                            alert('wrong')\r\n                            break\r\n                    }\r\n                }\r\n            }\r\n            let loop_start = \"\"\r\n            let loop_end = \"\"\r\n            for (let loop of loopData) {\r\n                if (loop[0][0] === programData.indexOf(dousa_group).toString() && loop[0][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_start = `X${loop[2]}.1\\n`\r\n                }\r\n                if (loop[1][0] === programData.indexOf(dousa_group).toString() && loop[1][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_end = `X.1-\\n`\r\n                }\r\n            }\r\n            dousa_jikkou_of_group += loop_start + dousa_jikkou_row_arr.join(\",\") + \"\\n\" + loop_end\r\n        }\r\n        every_program_teigi += dousa_jikkou_of_group\r\n    }\r\n    \r\n    output += every_data_teigi\r\n    output += every_program_teigi\r\n    if (isNyuryokuShingou) {\r\n        let nyuryokuTxt = `K81=1\\nK82=1\\nL1.1\\nI1.1,JL2.1,T0.1\\nI2.1,JL3.1,T0.1\\nI3.1,JL4.1,T0.1\\nI4.1,].1:].1,T0.1\\nL2.1\\n[1.1\\nI1.1,W0.1,JL1.1\\nL3.1\\n[2.1\\nI2.1,W0.1,JL1.1\\nL4.1\\n[3.1\\nI3.1,W0.1,JL1.1\\nEND`\r\n        return output + \"END\" + \"\\n\" + nyuryokuTxt\r\n    } else {\r\n        return output + \"END\"\r\n    }\r\n}\r\n","import { Button } from \"@mui/material\"\r\nimport { useRef, useState } from \"react\"\r\n\r\nexport const WizardKikou = (props) => {\r\n    const params = props.params\r\n\r\n    const [input, setInput] = useState(params.wizardInput)\r\n\r\n    const goNext = () => {\r\n        if (input !== \"モータ単体\" && input !== \"テーブル\") {\r\n            let tmp = [...params.history]\r\n            tmp.push([\"kikou\", input])\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"susumiryou\", input])\r\n        } else {\r\n            let tmp = [...params.history]\r\n            tmp.push([\"kikou\", input])\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"gensoku\", input])\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard\">\r\n            <p className=\"tanni-wizard-title\">機構の選択</p>\r\n            <div className=\"tanni-wizard-selector\">\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-1\" name=\"kikou-sentaku\" value=\"モータ単体\"/>\r\n                    <label htmlFor=\"kikou-1\">モータ単体</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-2\" name=\"kikou-sentaku\" value=\"ボールねじ\" />\r\n                    <label htmlFor=\"kikou-2\">ボールねじ</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-3\" name=\"kikou-sentaku\" value=\"ベルト駆動\" />\r\n                    <label htmlFor=\"kikou-3\">ベルト駆動</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-4\" name=\"kikou-sentaku\" value=\"ラックアンドピニオン\" />\r\n                    <label htmlFor=\"kikou-4\">ラックアンドピニオン</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-5\" name=\"kikou-sentaku\" value=\"テーブル\" />\r\n                    <label htmlFor=\"kikou-5\">テーブル</label>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardSusumiryou = (props) => {\r\n    const params = props.params\r\n    const mode = params.wizardInput\r\n    let susumiryouText = \"\"\r\n    const [input, setInput] = useState([0, 0])\r\n\r\n    switch (mode) {\r\n        case \"ボールねじ\":\r\n            susumiryouText = \"ボールねじリード\"\r\n            break\r\n        case \"ベルト駆動\":\r\n            susumiryouText = \"プーリ直径\"\r\n            break\r\n        case \"ラックアンドピニオン\":\r\n            susumiryouText = \"ピニオン直径\"\r\n            break\r\n        default:\r\n            susumiryouText = \"ボールねじリード\"\r\n            break\r\n    }\r\n\r\n    const goNext = () => {\r\n        let tmp = [...params.history]\r\n        tmp.push([\"susumiryou\", input])\r\n        params.setHistory(tmp)\r\n        params.setWizardInput([\"gensoku\", input])\r\n    }\r\n\r\n    const goBack = () => {\r\n        let tmp = [...params.history]\r\n        let kikouValue = tmp[0][1]\r\n        params.setHistory([])\r\n        params.setWizardInput([\"kikou\", kikouValue])\r\n    }\r\n\r\n    const changeInput = (e, index) => {\r\n        let tmp = [...input]\r\n        tmp[index-1] = e.currentTarget.value\r\n        setInput(tmp)\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard\">\r\n            <p className=\"tanni-wizard-title\">モータ1回転あたりの進み量</p>\r\n            <div className=\"tanni-wizard-selector\">\r\n                <div>\r\n                    <p className='tanni-susumi-p'>{susumiryouText} : </p>\r\n                    <input type=\"text\" placeholder={0} onChange={(e) => changeInput(e, 1)}/>\r\n                    <p className='tanni-susumi-tanni'> mm</p>\r\n                </div>\r\n                <div>\r\n                    <p className='tanni-susumi-p'>進み量 : </p>\r\n                    <input type=\"text\" placeholder={0} onChange={(e) => changeInput(e, 2)}/>\r\n                    <p className='tanni-susumi-tanni'> mm</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardGensoku = (props) => {\r\n    const params = props.params\r\n    const [input, setInput] = useState([0, 0])\r\n\r\n    const goNext = () => {\r\n        let tmp = [...params.history]\r\n        tmp.push([\"gensoku\", input])\r\n        params.setHistory(tmp)\r\n        params.setWizardInput([\"hyouji\", input])\r\n    }\r\n\r\n    const goBack = () => {\r\n        let tmp = [...params.history]\r\n        let index = tmp.length - 1\r\n        const previousMove = tmp[index][0]\r\n        if (index > -1) {\r\n            tmp.splice(index, 1)\r\n        }\r\n        params.setHistory(tmp)\r\n        params.setWizardInput([previousMove, 0])\r\n    }\r\n\r\n    const changeInput = (e, index) => {\r\n        let tmp = [...input]\r\n        tmp[index-1] = e.currentTarget.value\r\n        setInput(tmp)\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard\">\r\n            <div className=\"tanni-wizard-title gensoku-title\"><input type=\"checkbox\" />減速比率</div>\r\n            <div className=\"tanni-wizard-selector\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>入力</th>\r\n                            <th></th>\r\n                            <th>出力</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td><input type=\"text\" onChange={(e) => changeInput(e, 1)}/></td>\r\n                            <td>  :  </td>\r\n                            <td><input type=\"text\" onChange={(e) => changeInput(e, 2)}/></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardHyouji = (props) => {\r\n    const params = props.params\r\n    const [input, setInput] = useState(\"パルス\")\r\n\r\n    const goNext = () => {\r\n        let tmp = [...params.history]\r\n        tmp.push([\"hyouji\", input])\r\n        params.setHistory(tmp)\r\n        params.setWizardInput([\"bunkai\", input])\r\n    }\r\n\r\n    const goBack = () => {\r\n        let tmp = [...params.history]\r\n        let index = tmp.length - 1\r\n        const previousMove = tmp[index][0]\r\n        if (index > -1) {\r\n            tmp.splice(index, 1)\r\n        }\r\n        params.setHistory(tmp)\r\n        params.setWizardInput([previousMove, 0])\r\n    }\r\n\r\n    const radios = () => {\r\n        switch (params.history[0][1]) {\r\n            case \"ボールねじ\" || \"ベルト駆動\" || \"ラックアンドピニオン\":\r\n                return (\r\n                    <><div>\r\n                        <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"hyouji-1\" name=\"hyouji-sentaku\" value=\"パルス\" defaultChecked />\r\n                        <label htmlFor=\"hyouji-1\">パルス</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"hyouji-2\" name=\"hyouji-sentaku\" value=\"mm\" />\r\n                        <label htmlFor=\"hyouji-2\">mm</label>\r\n                    </div></>\r\n                )\r\n            default: \r\n                return (\r\n                    <><div>\r\n                        <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"hyouji-1\" name=\"hyouji-sentaku\" value=\"パルス\" defaultChecked />\r\n                        <label htmlFor=\"hyouji-1\">パルス</label>\r\n                    </div>\r\n                    <div>\r\n                        <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"hyouji-3\" name=\"hyouji-sentaku\" value=\"角度\" />\r\n                        <label htmlFor=\"hyouji-3\">角度</label>\r\n                    </div></>\r\n                )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard\">\r\n            <p className=\"tanni-wizard-title\">表示単位</p>\r\n            <div className=\"tanni-wizard-selector\">\r\n                {radios()}\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardBunkai = (props) => {\r\n    const params = props.params\r\n    const mode = params.wizardInput\r\n    let bunkaiText = \"\"\r\n    const [input, setInput] = useState(\"0\")\r\n\r\n    switch (mode) {\r\n        case \"パルス\":\r\n            bunkaiText = \"パルス\"\r\n            break\r\n        case \"mm\":\r\n            bunkaiText = \"mm\"\r\n            break\r\n        case \"角度\":\r\n            bunkaiText = \"°\"\r\n            break\r\n        default:\r\n            bunkaiText = \"パルス\"\r\n            break\r\n    }\r\n\r\n    const goOK = () => {\r\n        let tmp = [...params.history]\r\n        tmp.push([\"hyouji\", input])\r\n        params.setHistory(tmp)\r\n        params.setWizardInput([\"bunkai\", input])\r\n        props.setTanniValue(props.getPulse(params.history))\r\n        alert(\"未完成\")\r\n    }\r\n\r\n    const goBack = () => {\r\n        let tmp = [...params.history]\r\n        let index = tmp.length - 1\r\n        const previousMove = tmp[index][0]\r\n        if (index > -1) {\r\n            tmp.splice(index, 1)\r\n        }\r\n        params.setHistory(tmp)\r\n        params.setWizardInput([previousMove, 0])\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard\">\r\n            <p className=\"tanni-wizard-title\">分解能</p>\r\n            <div className=\"tanni-wizard-selector\">\r\n                <Dropdown setItem={setInput} itemArr={[300, 600, 1000, 1200, 2000, 3000, 5000, 6000, 10000, 12000]} />\r\n                <p className=\"tanni-bunkai-text\">{bunkaiText}</p>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-ok\" variant=\"contained\" onClick={() => goOK()}>OK</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Dropdown = (props) => {\r\n    const itemArr = props.itemArr\r\n    const setItem = props.setItem\r\n\r\n    const [selectedItem, setSelectedItem] = useState(itemArr[0])\r\n    const dropdownItems = useRef()\r\n    const selectedItemRef = useRef()\r\n\r\n    const dropdowns = () => {\r\n        return itemArr.map(item => {\r\n            return (\r\n                <div className=\"dropdown-item unselectable\" onClick={(e) => clickItem(e)} key={item}>{item}</div>\r\n            )\r\n        })\r\n    }\r\n\r\n    const showItems = () => {\r\n        dropdownItems.current.style.display = \"block\"\r\n    }\r\n    \r\n    const clickItem = (e) => {\r\n        setSelectedItem(e.target.innerText)\r\n        setItem(e.target.innerText)\r\n        dropdownItems.current.style.display = \"none\"\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"dropdown-selector\">\r\n            <div ref={selectedItemRef} className=\"selected-item unselectable\" onClick={() => showItems()}>{selectedItem}<i className=\"fas fa-angle-down\"></i></div>\r\n            <div ref={dropdownItems} className=\"dropdown-items unselectable\">\r\n                {dropdowns()}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { Button, gridClasses } from '@mui/material';\r\nimport { toCML } from './toCml';\r\nimport { Dropdown } from './tanni-funcs';\r\n\r\nexport const ProgramBlock = (props) => {\r\n\r\n    const addRowRef = useRef()\r\n    const pgEmptyBox = useRef()\r\n\r\n    const trashInput = (e, programData, setProgramData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])] = []\r\n        setProgramData(tmp) \r\n    }\r\n\r\n    const trashLoop = (e, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...loopData]\r\n        let index = -1\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                index = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        if (index !== -1) {\r\n            tmp.splice(index, 1);\r\n        }\r\n        setLoopData(tmp) \r\n    }\r\n\r\n    const trashRow = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp[parseInt(indexArr[0])].length > 1) {\r\n            tmp[parseInt(indexArr[0])].splice(parseInt(indexArr[1]), 1);        \r\n        } else {\r\n            let emptyRow = []\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                emptyRow.push([])\r\n                i += 1\r\n            }\r\n            tmp[parseInt(indexArr[0])] = [emptyRow]\r\n        }\r\n        // ------------------------------------\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                if (loop[1][1] === loop[0][1]) {\r\n                    tmpLoop.splice(tmpLoop.indexOf(loop), 1);\r\n                }\r\n            } else if (loop[1][0] === indexArr[0] && loop[1][1] === indexArr[1]) {\r\n                loop[1] = [indexArr[0], (parseInt(indexArr[1])-1).toString()]\r\n            }\r\n        })\r\n\r\n        tmpLoop.forEach(loop => {\r\n            if ((programData[parseInt(loop[0][0])].length - 1) < (loop[1][1] - parseInt(loop[0][1]))) {\r\n                loop[1][1] = (parseInt(loop[1][1])-1).toString()\r\n            }\r\n        })\r\n\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashGroup = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp.length > 1) {\r\n            tmp.splice(parseInt(indexArr[0]), 1);\r\n        } else {\r\n            tmp = [[[]]]\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                tmp[0][0].push([])\r\n                i += 1\r\n            }\r\n        }\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0]) {\r\n                indexArr.push(tmpLoop.indexOf(loop))\r\n            }\r\n        })\r\n        let i = tmpLoop.length\r\n        while (i--) {\r\n            if (tmpLoop[i][0][0] === indexArr[0]) {\r\n                tmpLoop.splice(i, 1)\r\n            }\r\n        }\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashJiku = (e) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        if (props.jiku > 1) {\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    dousa_row.splice(indexArr[0]-1, 1)\r\n                }\r\n            }\r\n            props.setJiku(props.jiku - 1)\r\n        } else {\r\n            tmp = [[[[]]]]\r\n            props.setLoopData([])\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const addRow = (e) => {\r\n        const indexArr = e.currentTarget.id.split('-')\r\n        indexArr.shift()\r\n        let emptyRow = []\r\n        let i = 0\r\n        while (i <= props.jiku-1) {\r\n            emptyRow.push([])\r\n            i += 1\r\n        }\r\n        let tmp = [...props.programData]\r\n        tmp[parseInt(indexArr[0])].splice(parseInt(indexArr[1]), 0, emptyRow)\r\n        props.setProgramData(tmp) \r\n    }\r\n\r\n    const showOnHover = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"red\"\r\n        e.target.querySelector(\".add-row-plus-cont\").style.display = \"flex\"\r\n    }\r\n\r\n    const hideOnLeave = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"white\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"none\"\r\n    }\r\n\r\n    const addJiku = (e) => {\r\n        if (props.jiku <= 14) {\r\n            const indexArr = e.currentTarget.id.split('-')\r\n            indexArr.shift()\r\n            let tmp = [...props.programData]\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    dousa_row.splice(parseInt(indexArr[0])-1, 0, [])\r\n                }\r\n            }\r\n            props.setProgramData(tmp) \r\n            props.setJiku(props.jiku + 1)\r\n        } else {\r\n            alert(\"軸は最大で15軸設定できます。\")\r\n        }\r\n    }\r\n\r\n    const showOnHoverJiku = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"red\"\r\n        e.currentTarget.querySelector(\".add-jiku-plus-cont\").style.display = \"flex\"\r\n    }\r\n\r\n    const hideOnLeaveJiku = (e) => {\r\n        e.currentTarget.style.backgroundColor = \"white\"\r\n        e.currentTarget.querySelector(\".add-jiku-plus-cont\").style.display = \"none\"\r\n    }\r\n\r\n    const moveRow = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        const dousaGroup = tmp[parseInt(indexArr[0])]\r\n        const rowIndex = parseInt(indexArr[1])\r\n        switch (direction) {\r\n            case \"up\":\r\n                if (rowIndex >= 1) {\r\n                    [dousaGroup[rowIndex-1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex-1]]\r\n                }\r\n                break\r\n            case \"down\":\r\n                if (rowIndex < dousaGroup.length-1) {\r\n                    [dousaGroup[rowIndex+1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex+1]]\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const moveJiku = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let current_jiku = parseInt(indexArr[0])\r\n        let tmp = [...props.programData]\r\n        switch (direction) {\r\n            case \"left\":\r\n                if (current_jiku !== 1) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            console.log(current_jiku-1)\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku-2]]\r\n                            dousa_row[current_jiku-2] = tmp_dousa\r\n                        }\r\n                    }\r\n                }\r\n                break\r\n            case \"right\":\r\n                if (current_jiku !== props.jiku) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku]]\r\n                            dousa_row[current_jiku] = tmp_dousa\r\n                        }\r\n                    }\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const changeCML = (programData, loopData, isNyuryokuShingou) => {\r\n        props.setCmlOutput(toCML(programData, loopData, isNyuryokuShingou))\r\n    }\r\n\r\n    const showTypeData = (e) => {\r\n        e.target.parentNode.querySelector('.typeDataInDousa').style.display = \"flex\"\r\n    }\r\n\r\n        \r\n    // Drag Functions\r\n    const emptyBoxDragStart = (e) => {\r\n        // e.currentTarget.className += \"dousa-box\"\r\n        // setTimeout(() => (e.currentTarget.className = 'dragged-box'), 0);\r\n    }\r\n    \r\n    const emptyBoxDragEnd = (e) => {\r\n        e.currentTarget.className = \"dousa-box\"\r\n    }\r\n\r\n    function emptyBoxDragOver(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragEnter(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-empty-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragLeave(e) {\r\n        e.target.className = 'pg-empty-box';\r\n    }\r\n\r\n    function emptyBoxDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\" && !props.currentDraggedCommand.includes(\"-\")) {\r\n            tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])] = [props.currentDraggedCommand, 1, [[\"数値を入力してください\", \"pps\"], [\"数値を入力してください\", \"pps\"], [\"数値を入力してください\", \"pps\"]]]\r\n            props.setProgramData(tmp)\r\n        } else if (props.currentDraggedCommand.includes(\"-\")) {\r\n            let draggedIndexArr = props.currentDraggedCommand.split(\"-\")\r\n            draggedIndexArr.shift()\r\n            tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])] = tmp[parseInt(draggedIndexArr[0])][parseInt(draggedIndexArr[1])][parseInt(draggedIndexArr[2])]\r\n            tmp[parseInt(draggedIndexArr[0])][parseInt(draggedIndexArr[1])][parseInt(draggedIndexArr[2])] = []\r\n            props.setProgramData(tmp)\r\n        }\r\n    }\r\n    // -------\r\n    function emptyBoxLoopDragOver(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragEnter(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-l-empty-loop-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragLeave(e) {\r\n        e.target.className = 'pg-l-empty-loop';\r\n    }\r\n\r\n    function emptyBoxLoopDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            tmp.push([[indexArr[0], indexArr[1]], [indexArr[0], indexArr[1]], 2])\r\n            props.setLoopData(tmp)\r\n        } \r\n    }\r\n\r\n    const resizeLoop = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        let mainItemIndex\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                mainItemIndex = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        let isDirectionAvailable = true\r\n        switch(direction) {\r\n            case \"top-up\":\r\n                tmp.forEach(loop => {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (loop[1][0] === tmp[mainItemIndex][0][0] && loop[1][1] === tmp[mainItemIndex][0][1])) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                })\r\n                if (isDirectionAvailable && parseInt(tmp[mainItemIndex][0][1]) >= 1) {\r\n                    tmp[mainItemIndex][0][1] = (parseInt(tmp[mainItemIndex][0][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"top-down\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][0][1] = (parseInt(tmp[mainItemIndex][0][1]) + 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-up\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][1][1] = (parseInt(tmp[mainItemIndex][1][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-down\":\r\n                for (let loop of tmp) {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (loop[0][0] === tmp[mainItemIndex][1][0] && loop[0][1] === tmp[mainItemIndex][1][1])) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                }\r\n                let rowLength = props.programData[tmp[mainItemIndex][1][0]].length\r\n                if (isDirectionAvailable && parseInt(tmp[mainItemIndex][1][1]) < (rowLength - 1)) {\r\n                    tmp[mainItemIndex][1][1] = (parseInt(tmp[mainItemIndex][1][1]) + 1).toString()\r\n                }\r\n                break          \r\n            default:\r\n                break \r\n        }\r\n        props.setLoopData(tmp)\r\n    }\r\n    // -------\r\n    function addGroupDragOver(e) {\r\n        if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function addGroupDragEnter(e) {\r\n        e.currentTarget.style.backgroundColor = \"red\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"flex\"\r\n    }\r\n    \r\n    function addGroupDragLeave(e) {\r\n        e.currentTarget.style.backgroundColor = \"white\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"none\"\r\n    }\r\n    \r\n    function addGroupDragDrop(e) {\r\n        let tmp = [...props.programData]\r\n        if (tmp.length <= 29) {\r\n\r\n            const indexArr = e.currentTarget.id.split('-')\r\n            indexArr.shift()\r\n            if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n                let emptyGroup = [[]]\r\n                for (let z = 0; z < props.jiku; z++) emptyGroup[0].push([]);\r\n                tmp.splice((indexArr[0]+1), 0, emptyGroup); \r\n                props.setProgramData(tmp)\r\n            } \r\n            e.currentTarget.style.backgroundColor = \"white\"\r\n            e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"none\"\r\n        } else {\r\n            alert(\"動作グループは最大30まで設定できます。\")\r\n        }\r\n    }\r\n\r\n    const dataToHTML = (programData) => {\r\n        let pg_l_arr = [<div className=\"pg-l-empty pglemp0\" key={\"first-pg-l-empty-box\"}></div>]\r\n        let main_grid = []\r\n        let jiku_i = 1\r\n        while (jiku_i <= props.jiku) {\r\n            if (jiku_i === 1) {\r\n                main_grid.push(<div className=\"jiku-number\" id={\"jiku-\"+jiku_i} key={\"jiku\"+jiku_i}><div className=\"add-jiku-left\" id={\"addJiku-\"+jiku_i} onClick={(e) => addJiku(e)} onMouseEnter={(e) => showOnHoverJiku(e)} onMouseLeave={(e) => hideOnLeaveJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_i+1)} onClick={(e) => addJiku(e)} onMouseEnter={(e) => showOnHoverJiku(e)} onMouseLeave={(e) => hideOnLeaveJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>{jiku_i}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            } else if (jiku_i === 15) {\r\n                main_grid.push(<div className=\"jiku-number\" id={\"jiku-\"+jiku_i} key={\"jiku\"+jiku_i}><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>{jiku_i}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            } else {\r\n                main_grid.push(<div className=\"jiku-number\" id={\"jiku-\"+jiku_i} key={\"jiku\"+jiku_i}><div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_i+1)} onClick={(e) => addJiku(e)} onMouseEnter={(e) => showOnHoverJiku(e)} onMouseLeave={(e) => hideOnLeaveJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>{jiku_i}軸目<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            }\r\n            jiku_i += 1\r\n        }\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-0firrrst\"}></div>)\r\n        main_grid.push(<div className=\"grid-line\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"first-grid-line-key\"}></div>)\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-ggggllllliiinnneeee\"}></div>)\r\n        let dousa_group_i = 0\r\n        for (let dousa_group of programData) {\r\n            pg_l_arr.push(<div className=\"pg-l-empty pglempgroup\" key={\"pglempty\"+dousa_group_i}></div>)\r\n            main_grid.push(<div className=\"dousa-group-kaishi unselectable\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"dousagroup-\"+dousa_group_i} id={\"dousaGroup-\"+dousa_group_i}><p>動作グループ{dousa_group_i+1}の開始</p><i className=\"fas fa-trash\" onClick={(e) => trashGroup(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)}></i></div>)\r\n            main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i}></div>)\r\n            let dontPutEmp = []\r\n            let dousa_row_i = 0\r\n            for (let dousa_row of dousa_group) {\r\n                let loopCount\r\n                props.loopData.forEach(loop => {\r\n                    if (loop[0][0] === dousa_group_i.toString() && loop[0][1] === dousa_row_i.toString()) {\r\n                        loopCount = loop[2]\r\n                        let loopHeight = loop[1][1] - loop[0][1] + 1\r\n                        let loopStyleHeight = loopHeight * 2.3 + ((loopHeight-1) * (0.2 + 0.4))\r\n                        for (let z = 0; z < loopHeight; z++) dontPutEmp.push(\"loop\");\r\n                        let dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"top-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        if (loop[0][1] === loop[1][1]) {\r\n                            dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        }\r\n                        pg_l_arr.push(\r\n                        <div className=\"pg-l-loop unselectable\" style={{height:loopStyleHeight+\"rem\"}} id={\"loop-\"+dousa_group_i+\"-\"+dousa_row_i} key={\"pglloop\"+dousa_row}>\r\n                            {/* <TypeDataInDousa parentId={\"loop-\"+dousa_group_i+\"-\"+dousa_row_i} loopData={props.loopData} setLoopData={props.setLoopData} dousaType=\"繰り返し\" dousaNum={0}/> */}\r\n                            {dragArrows.map(dragArrow => {return dragArrow})}\r\n                            <p className=\"loop-title\" onClick={(e) => showTypeData(e)}>繰り返し{loopCount}回</p>\r\n                            <i className=\"fas fa-trash trash-block\" onClick={(e) => trashLoop(e, props.loopData, props.setLoopData)}></i>\r\n                        </div>)\r\n                    }\r\n                })\r\n                if (dontPutEmp.length === 0) {\r\n                    pg_l_arr.push(<div className=\"pg-l-empty-loop\" id={\"emptyloop-\"+dousa_group_i+\"-\"+dousa_row_i} onDragOver={(e) => emptyBoxLoopDragOver(e)} onDragEnter={(e) => emptyBoxLoopDragEnter(e)} onDragLeave={(e) => emptyBoxLoopDragLeave(e)} onDrop={(e) => emptyBoxLoopDragDrop(e)} key={\"pglemploop-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    dontPutEmp.shift()\r\n                }\r\n                if (dousa_row_i === 0) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow0\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-0\"} onClick={(e) => addRow(e)} onMouseEnter={(e) => showOnHover(e)} onMouseLeave={(e) => hideOnLeave(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                let dousa_i = 0\r\n                for (let dousa of dousa_row) {\r\n                    if (dousa.length !== 0) {\r\n                        if (dousa[2].includes(\"数値を入力してください\")) {\r\n                            main_grid.push(<div className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}><div className='no-value-circle'></div><TypeDataInDousa jiku={dousa_i} parentId={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i} programData={props.programData} setProgramData={props.setProgramData} dousaType={dousa[0]} dousaNum={dousa[1]}/><p className='dousa-title' onClick={(e) => showTypeData(e)} >{dousa[0]}{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        } else {\r\n                            main_grid.push(<div className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}><TypeDataInDousa jiku={dousa_i} parentId={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i} programData={props.programData} setProgramData={props.setProgramData} dousaType={dousa[0]} dousaNum={dousa[1]}/><p className='dousa-title' onClick={(e) => showTypeData(e)} >{dousa[0]}{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        }\r\n                    } else {\r\n                        // main_grid.push(<div className=\"dousa-box\"></div>)\r\n                        main_grid.push(<div ref={pgEmptyBox} key={dousa_group_i+\"emptybox\"+dousa_row_i+\"-\"+dousa_i} onDragOver={(e) => emptyBoxDragOver(e)} onDragEnter={(e) => emptyBoxDragEnter(e)} onDragLeave={(e) => emptyBoxDragLeave(e)} onDrop={(e) => emptyBoxDragDrop(e)} className=\"pg-empty-box\" id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}></div>)\r\n                    }\r\n                    dousa_i += 1\r\n                }\r\n                main_grid.push(\r\n                    <div className=\"trash-row-right-box\" key={\"trashR-\"+dousa_group_i+\"-\"+dousa_row_i} id={\"trashRow-\"+dousa_group_i+\"-\"+(dousa_row_i)}>\r\n                        <i onClick={(e) => trashRow(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)} className=\"fas fa-trash\"></i>\r\n                        <div className='move-row-cont'><i className='fas fa-arrow-alt-circle-up move-row-up' onClick={(e) => moveRow(e, \"up\")}></i><i className='fas fa-arrow-alt-circle-down move-row-down' onClick={(e) => moveRow(e, \"down\")}></i></div>\r\n                    </div>)\r\n                if (dousa_row_i !== (dousa_group.length-1)) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} onMouseEnter={(e) => showOnHover(e)} onMouseLeave={(e) => hideOnLeave(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} onMouseEnter={(e) => showOnHover(e)} onMouseLeave={(e) => hideOnLeave(e)} onDragOver={(e) => addGroupDragOver(e)} onDragEnter={(e) => addGroupDragEnter(e)} onDragLeave={(e) => addGroupDragLeave(e)} onDrop={(e) => addGroupDragDrop(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1),height:\"0.4rem\"}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                dousa_row_i += 1\r\n            }\r\n            dousa_group_i += 1\r\n        }\r\n\r\n        return (\r\n            <div className=\"program-grid\">\r\n                <div className=\"pg-left\">{pg_l_arr}</div>\r\n                <div className=\"program-main-grid\" style={{gridTemplateColumns:\"repeat(\"+props.jiku+\", 3fr) 1fr\"}}>{main_grid}</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // initially have 動作グループ1\r\n    return(\r\n        <div className=\"program-block\">\r\n            {dataToHTML(props.programData)}\r\n            <div className=\"enter-button\">\r\n                <Button variant=\"contained\" onClick={() => changeCML(props.programData, props.loopData, props.isNyuryokuShingou)}>CMLへ変換</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst TypeDataInDousa = (props) => {\r\n    // let dousaType = props.dousaType\r\n    // let dousaNum = props.dousaNum\r\n    // let parentId = props.parentId\r\n    const popupRef = useRef()\r\n    // --\r\n    let indexArr = props.parentId.split('-')\r\n    indexArr.shift()\r\n    // -\r\n    let tmp = [...props.programData]\r\n    // --\r\n    const closeTypeData = () => {\r\n        popupRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const DataInput = (props) => {\r\n        // const data = [100, \"pps\"]\r\n        const index = props.index\r\n        const tanni = props.tanni\r\n        const [value, setValue] = useState(tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][2][index][0])\r\n        const [tanniState, setTanniState] = useState(tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][2][index][1])\r\n\r\n        // ---\r\n\r\n        return (\r\n            <>\r\n                <input className=\"type-data-input\" required value={value} onChange={(e) => setValue(e.target.value)} />\r\n                <div className=\"type-data-tanni\">\r\n                    <select className='select-tanni' value={tanniState} onChange={(e) => setTanniState(e.target.value)} >\r\n                        <option value=\"pps\">pps</option>\r\n                        <option value={tanni}>{tanni}</option>\r\n                    </select>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const setTypeData = () => {\r\n        let isAllNumber = []\r\n        popupRef.current.querySelectorAll('.type-data-input').forEach(input => {\r\n            if (isNaN(parseInt(input.value))) {\r\n                isAllNumber.push(\"NAN\")\r\n            }\r\n        })\r\n        if (isAllNumber.length === 0) {\r\n            let tmp = [...props.programData]\r\n            let valueArr = []\r\n            let inputs = popupRef.current.querySelectorAll(\".type-data-input\")\r\n            let tanniSelectors = popupRef.current.querySelectorAll(\".select-tanni\")\r\n            let i = 0\r\n            while (i < inputs.length) {\r\n                valueArr.push([inputs[i].value, tanniSelectors[i].value])\r\n                i++\r\n            }\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    let dousa = dousa_row[props.jiku]\r\n                    if (dousa[1] === props.dousaNum && dousa[0] === props.dousaType) {\r\n                        dousa[2] = valueArr\r\n                    }\r\n                }\r\n            }\r\n            tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][2] = valueArr\r\n            props.setProgramData(tmp)\r\n            // --\r\n            closeTypeData()\r\n        } else {\r\n            isAllNumber = []\r\n            alert('数値を入力してください') \r\n        }\r\n    } \r\n\r\n    const dataNum = (props.dousaType !== \"繰り返し\") ? \r\n        <div className='typedata-input-line' key={\"input-num-line\"}>\r\n            <p className='typedata-var'>番号:</p><NumDropDown jiku={props.jiku} dousaType={props.dousaType} dousaNum={props.dousaNum} popupRef={popupRef} programData={props.programData} setProgramData={props.setProgramData} indexArr={indexArr}/>\r\n        </div> : \"\"\r\n\r\n    return (\r\n        <div className=\"typeDataInDousa\" ref={popupRef}>\r\n            <div className=\"close-typedata\"><i onClick={() => closeTypeData()} className=\"fas fa-times-circle\"></i></div>\r\n            {dataNum}\r\n            <div className=\"typedata-input-line\">\r\n                <p className=\"typedata-var\">速度データ</p>\r\n                <DataInput index={0} tanni={\"mm/s\"} />\r\n                <p>と</p>\r\n            </div>\r\n            <div className=\"typedata-input-line\">\r\n                <p className=\"typedata-var\">加速度データ</p>\r\n                <DataInput index={1} tanni={\"mm/s2\"} />\r\n                <p>で</p>\r\n            </div>\r\n            <div className=\"typedata-input-line\">\r\n                <p className=\"typedata-var\">位置データ</p>\r\n                <DataInput index={2} tanni={\"mm\"} />\r\n                <p>へ移動する</p>\r\n            </div>\r\n            <Button className=\"type-data-button\" variant=\"contained\" onClick={() => setTypeData()}>OK</Button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst NumDropDown = (props) => {\r\n    // props: programData, setProgramData, dataType, dataNum, popupRef, jiku, indexArr\r\n    const popupRef = props.popupRef\r\n    const indexArr = props.indexArr\r\n    let tmp = [...props.programData]\r\n    \r\n    const [currentNum, setCurrentNum] = useState(tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][1])\r\n    const numItemRef = useRef()\r\n    const currentNumRef = useRef()\r\n    \r\n    const selectItem = (e) => {\r\n        const value = parseInt(e.currentTarget.id.split(\"-\")[2])\r\n        setCurrentNum(value)\r\n        numItemRef.current.style.display = \"none\"\r\n        let sameDataArr = []\r\n        for (let dousa_group of tmp) {\r\n            for (let dousa_row of dousa_group) {\r\n                let dousa = dousa_row[props.jiku]\r\n                if (dousa[1] === value && dousa[0] === props.dousaType) {\r\n                    sameDataArr.push(dousa[2])\r\n                    console.log(\"hi\")\r\n                }\r\n            }\r\n        }\r\n        if (sameDataArr.length > 0) {\r\n            tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][2] = sameDataArr[0]\r\n            let inputs = popupRef.current.querySelectorAll(\".type-data-input\")\r\n            let tanniSelectors = popupRef.current.querySelectorAll(\".select-tanni\")\r\n            let i = 0\r\n            while (i < inputs.length) {\r\n                inputs[i].value = sameDataArr[0][i][0]\r\n                tanniSelectors[i].value = sameDataArr[0][i][1]\r\n                i++\r\n            }\r\n        }\r\n        tmp[parseInt(indexArr[0])][parseInt(indexArr[1])][parseInt(indexArr[2])][1] = value\r\n        props.setProgramData(tmp)\r\n    }\r\n    const getNumItems = () => {\r\n        let res = []\r\n        let i = 1\r\n        while (i <= 250) {\r\n            res.push(<div className='num-dropdown-item' key={i} id={\"num-dropdown-\"+i} onClick={(e) => selectItem(e)}><p>{i}</p></div>)\r\n            i += 1\r\n        }\r\n        return res\r\n    }\r\n    const showItems = () => {\r\n        let isItemsShown = numItemRef.current.style.display !== \"block\" ? false : true\r\n        if (!isItemsShown) {\r\n            numItemRef.current.style.display = \"block\"\r\n        } else {\r\n            numItemRef.current.style.display = \"none\"\r\n        }\r\n    }\r\n    return (\r\n        <div className='num-dropdown'>\r\n            <div className='currentNum-container' onClick={() => showItems()}><p ref={currentNumRef} className='currentNum'>{currentNum}</p><i className='fas fa-caret-down'></i></div>\r\n            <div ref={numItemRef} className='num-dropdown-item-container'>{getNumItems()}</div>\r\n        </div>\r\n    )\r\n}","import { Button } from '@mui/material';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { WizardGensoku, WizardKikou, WizardSusumiryou, WizardHyouji, WizardBunkai } from './tanni-funcs';\r\nimport { toCML } from './toCml';\r\n\r\n// Function to download data to a file\r\nexport const downloadFile = (data, filename, type) => {\r\n    var file = new Blob([data], {type: type});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        let a = document.createElement(\"a\"),\r\n        url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nexport const TopMenu = (props) => {\r\n\r\n    const topMenuRef = useRef()\r\n\r\n    const handleFileImport = (e) => {\r\n        const reader = new FileReader()\r\n        reader.onload = async (e) => { \r\n            // const obj = JSON.parse(e.target.result)\r\n            const obj = JSON.parse(reader.result)\r\n            try {\r\n                props.setJiku(obj.data.jiku)\r\n                props.setProgramData(obj.data.programData)\r\n                props.setLoopData(obj.data.loopData)\r\n                props.setCmlOutput(toCML(obj.data.programData, obj.data.loopData, obj.data.isNyuryokuShingou))\r\n            } catch (err) {\r\n                alert('ファイルが間違っています')\r\n            }\r\n        };\r\n        reader.readAsText(e.target.files[0], \"utf-8\")\r\n    }\r\n\r\n    // Function to download data to a file\r\n    const downloadFile = (data, filename, type) => {\r\n        var file = new Blob([data], {type: type});\r\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n            window.navigator.msSaveOrOpenBlob(file, filename);\r\n        else { // Others\r\n            var a = document.createElement(\"a\"),\r\n                    url = URL.createObjectURL(file);\r\n            a.href = url;\r\n            a.download = filename;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            setTimeout(function() {\r\n                document.body.removeChild(a);\r\n                window.URL.revokeObjectURL(url);  \r\n            }, 0); \r\n        }\r\n    }\r\n\r\n    const handleFileSave = () => {\r\n        let obj = {\"name\":\"cml-import\",\"data\":{\"jiku\":props.jiku,\"programData\":props.programData,\"loopData\":props.loopData,\"isNyuryokuShingou\":props.isNyuryokuShingou}}\r\n        const data = JSON.stringify(obj)\r\n        const filename = \"CML-途中保存\"\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    const openTanni = () => {\r\n        topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"flex\"\r\n        props.layerRef.current.style.display = \"block\"\r\n    }\r\n\r\n    const closeTanni = (topMenuRef, layerRef) => {\r\n        topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"none\"\r\n        layerRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const toggleNyuryokuShingou = (e) => {\r\n        const nyuryokuText = `K81=1\\nK82=1\\nL1.1\\nI1.1,JL2.1,T0.1\\nI2.1,JL3.1,T0.1\\nI3.1,JL4.1,T0.1\\nI4.1,].1:].1,T0.1\\nL2.1\\n[1.1\\nI1.1,W0.1,JL1.1\\nL3.1\\n[2.1\\nI2.1,W0.1,JL1.1\\nL4.1\\n[3.1\\nI3.1,W0.1,JL1.1\\nEND`\r\n\r\n        let isPressed = e.currentTarget.classList.contains(\"pressed-nyuryoku-shingou\")\r\n        if (isPressed) {\r\n            if (props.cmlOutput.includes(nyuryokuText)) {\r\n                let tmpstr = props.cmlOutput\r\n                props.setCmlOutput(tmpstr.replace(nyuryokuText,''))\r\n            }\r\n            e.target.classList.remove(\"pressed-nyuryoku-shingou\")\r\n            e.target.classList.add(\"unpressed-nyuryoku-shingou\")\r\n            props.setIsNyuryokuShingou(false)\r\n        } else {\r\n            if (!props.cmlOutput.includes(nyuryokuText)) {\r\n                let tmpstr = props.cmlOutput\r\n                props.setCmlOutput(tmpstr+\"\\n\"+nyuryokuText)\r\n            }\r\n            e.target.classList.remove(\"unpressed-nyuryoku-shingou\")\r\n            e.target.classList.add(\"pressed-nyuryoku-shingou\")\r\n            props.setIsNyuryokuShingou(true)\r\n        }\r\n    }\r\n\r\n    const isNyuryoku = props.isNyuryokuShingou ? \"オン\" : \"オフ\"\r\n\r\n    return (\r\n        <div ref={topMenuRef} className=\"top-menu\">\r\n            <div className=\"top-menu-button save-file unselectable\" onClick={() => handleFileSave()}>\r\n                プロジェクトファイルを保存\r\n            </div>\r\n            <div className=\"top-menu-button import-file unselectable\">\r\n                <label htmlFor=\"top-menu-file-upload\">\r\n                    プロジェクトファイルを開く\r\n                    <input id=\"top-menu-file-upload\" accept=\".txt\" type=\"file\" onChange={(e) => handleFileImport(e)}/>\r\n                </label>\r\n            </div>\r\n            <div className=\"top-menu-button tannikannsann unselectable\" onClick={() => openTanni()}>単位換算</div>\r\n            <Tannikannsann tanniValue={props.tanniValue} setTanniValue={props.setTanniValue} layerRef={props.layerRef} topMenuRef={topMenuRef} closeTanni={closeTanni}/>\r\n            <div className=\"top-menu-button unpressed-nyuryoku-shingou unselectable\" onClick={(e) => toggleNyuryokuShingou(e)}>入力信号: {isNyuryoku}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Tannikannsann = (props) => {\r\n    const [application, setApplication] = useState(\"ねじリード\")\r\n    const [bunkainou, setBunkainou] = useState(300)\r\n\r\n    const nyuryokuInput = useRef()\r\n    const shuturyokuInput = useRef()\r\n    const susumiInput = useRef()\r\n    const pulseText = useRef()\r\n\r\n    const getPulse = (tanniValue) => {\r\n        let kyori = 100\r\n        let nyuryoku = parseInt(nyuryokuInput.current.value.trim())\r\n        let shuturyoku = parseInt(shuturyokuInput.current.value.trim())\r\n        let susumiryou = parseInt(susumiInput.current.value.trim())\r\n        switch(application) {\r\n            case \"ねじリード\":\r\n                break;\r\n            default:\r\n                susumiryou = parseInt(susumiInput.current.value.trim()) * Math.PI\r\n        }\r\n        let pulse = kyori * (1/susumiryou) * parseInt(bunkainou) * (nyuryoku/shuturyoku)\r\n\r\n        // pulseText.current.innerText = pulse\r\n        props.closeTanni(props.topMenuRef, props.layerRef)\r\n    }\r\n\r\n    const getApplicationType = () => {\r\n        switch (application) {\r\n            case \"ボールねじ\":\r\n                return [\"ねじリード\", \"ねじリード\"]\r\n            case \"タイミングベルト\":\r\n                return [\"ブーリ直径\", \"ブーリ直径xπ\"]\r\n            case \"ラック&ピニオン\":\r\n                return [\"ピニオン直径\", \"ピニオン直径xπ\"]\r\n            default:\r\n                return [\"ねじリード\", \"ねじリード\"]\r\n        }\r\n    }\r\n\r\n    const WizardController = () => {\r\n        const [history, setHistory] = useState([])\r\n        const [wizardInput, setWizardInput] = useState([\"kikou\", \"モータ単体\"])\r\n\r\n        useEffect(() => {\r\n            // console.log(wizardInput)\r\n        }, [wizardInput])\r\n\r\n        const inputForm = () => {\r\n            const params = {\r\n                wizardInput: wizardInput[1], history, setHistory, setWizardInput\r\n            }\r\n        \r\n            switch (wizardInput[0]) {\r\n                case \"kikou\":\r\n                    return <WizardKikou params={params} />\r\n                case \"susumiryou\":\r\n                    return <WizardSusumiryou params={params} />\r\n                case \"gensoku\":\r\n                    return <WizardGensoku params={params} />\r\n                case \"hyouji\":\r\n                    return <WizardHyouji params={params} />\r\n                case \"bunkai\":\r\n                    return <WizardBunkai getPulse={getPulse} setTanniValue={props.setTanniValue} params={params} />\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className='wizard-controller'>\r\n                <div className='wizard-input'>\r\n                    {inputForm()}\r\n                </div>\r\n                <div className='wizard-buttons'>\r\n                </div>\r\n            </div>\r\n        )\r\n    } \r\n\r\n    return (\r\n        <div className=\"tannikannsann-popup\">\r\n            <div className=\"close-popup close-tannikannsann\" onClick={() => props.closeTanni(props.topMenuRef, props.layerRef)}><i className=\"fas fa-times-circle\"></i></div>\r\n            <div className=\"tannikannsann-wrapper\">\r\n                <WizardController />\r\n            </div>\r\n            \r\n            {/* <div>パルス　=　<p ref={pulseText}></p></div> */}\r\n            {/* <div className=\"pulse-formula-box\"> */}\r\n                {/* <p>パルス　=　距離[𝑚𝑚] × (1/進み量[𝑚𝑚⁄回転]) × 分解能[パルス/回転] × (入力/出力)</p> */}\r\n            {/* </div> */}\r\n        </div>\r\n    )\r\n}\r\n\r\n","import { Button } from '@mui/material';\r\nimport React, { useRef, useState } from 'react';\r\nimport './App.css'\r\nimport './program-grid.css'\r\nimport { Editor } from './Editor';\r\nimport { ProgramBlock } from './programBlock';\r\nimport useLocalStorage from './useLocalStorage';\r\nimport { TopMenu, downloadFile } from './menu';\r\nimport { toCML } from './toCml';\r\n\r\nexport const App = () => {\r\n\r\n    const [cmlOutput, setCmlOutput] = useLocalStorage('CML', '')\r\n    const [isNyuryokuShingou, setIsNyuryokuShingou] = useState(false)\r\n    const [jiku, setJiku] = useState(3)\r\n    const [tanniValue, setTanniValue] = useState(1)\r\n    // const [programData, setProgramData] = useState([[[[]]]])\r\n    // const [programData, setProgramData] = useState([\r\n    //     [\r\n    //         [[\"位置決め\", 1, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]], [\"押付け\", 1, [100, 100, 100]], [\"位置決め\", 2, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]]], \r\n    //         [[], [], [\"トルク制限\", 1, [100, 100, 100]]],\r\n    //         [[], [\"押付け\", 2, [100, 100, 100]], [\"トルク制限\", 3, [100, 100, 100]]],\r\n    //         [[], [\"押付け\", 3, [100, 100, 100]], [\"トルク制限\", 2, [100, 100, 100]]],\r\n    //     ],\r\n    //     [\r\n    //         [[], [\"タイマ\", 2, [100, 100, 100]], []]\r\n    //     ]\r\n    // ])\r\n    const [programData, setProgramData] = useState([\r\n        [\r\n            [[\"位置決め\", 1, [[98899898, \"pps\"], [100, \"pps\"], [100, \"pps\"]]], [], [\"位置決め\", 2, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]]], \r\n            [[], [], []],\r\n            [[], [], []],\r\n            [[], [], []],\r\n        ],\r\n        [\r\n            [[], [], []]\r\n        ]\r\n    ])\r\n\r\n    const [loopData, setLoopData] = useState([])\r\n    // const [loopData, setLoopData] = useState([[[\"0\",\"0\"], [\"0\",\"2\"], 4]])\r\n    const [currentDraggedCommand, setCurrentDraggedCommand] = useState(\"位置決め\")\r\n\r\n    const expCopy = useRef()\r\n    const expCopyDone = useRef()\r\n    const layerRef = useRef()\r\n    const commandSelectorRef = useRef()\r\n\r\n    const popMessage = (message) => {\r\n        const id = \"pop-message-\"+Date.now()\r\n        document.innerHTML += \r\n        <div id={id} className=\"pop-message message-success\">\r\n            <p className=\"message-text\">{message}</p>\r\n            <i className=\"fas fa-times\">agdsfdgfhkgjfhkdgsfa</i>\r\n        </div>\r\n        \r\n        setTimeout(() => {\r\n            document.querySelector(`#${id}`).remove()\r\n        }, 4000)\r\n    }\r\n\r\n    const getIndex = (document) => {\r\n        let res = document.id.split('-')\r\n        res.shift()\r\n        return res\r\n    }\r\n\r\n    // const commandDragStart = (e) => {\r\n    const commandHover = (e) => {\r\n        switch(e.target.id) {\r\n            case \"ichigime-selector\":\r\n                setCurrentDraggedCommand(\"位置決め\")\r\n                break\r\n            case \"oshituke-selector\":\r\n                setCurrentDraggedCommand(\"押付け\")\r\n                break\r\n            case \"toruku-selector\":\r\n                setCurrentDraggedCommand(\"トルク制限\")\r\n                break\r\n            case \"taima-selector\":\r\n                setCurrentDraggedCommand(\"タイマ\")\r\n                break\r\n            case \"kurikaeshi-selector\":\r\n                setCurrentDraggedCommand(\"繰り返し\")\r\n                break\r\n            case \"dousaGroup-selector\":\r\n                setCurrentDraggedCommand(\"動作グループを追加\")\r\n                break\r\n            default:\r\n                setCurrentDraggedCommand(\"NOPE\")\r\n                break\r\n        }\r\n        // this.className += ' hold';\r\n        // setTimeout(() => (this.className = 'invisible'), 0);\r\n    }\r\n    // function dragEnd() {\r\n    //     this.className = 'fill';\r\n    // }\r\n\r\n    const copyCML = (cml) => {\r\n        navigator.clipboard.writeText(cml);\r\n        expCopy.current.style.display = \"none\"\r\n        expCopyDone.current.style.display = \"block\"\r\n        setTimeout(() => {\r\n            expCopyDone.current.style.display = \"none\"\r\n        }, 2000)\r\n    }\r\n\r\n    const display = (ref) => {\r\n        ref.current.classList.add(\"shown\")\r\n        ref.current.classList.remove(\"hidden\")\r\n        setTimeout(() => {\r\n            if (!ref.current.classList.contains(\"hidden\")) {\r\n                ref.current.style.display = \"block\"\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const hide = (ref) => {\r\n        ref.current.classList.remove('shown')\r\n        ref.current.classList.add('hidden')\r\n        ref.current.style.display = \"none\"\r\n    }\r\n\r\n    const handleFileExport = () => {\r\n        const data = cmlOutput\r\n        const filename = \"CML-保存\"\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    return (\r\n        <div className=\"main\">\r\n            <div ref={layerRef} className=\"layer\"></div>\r\n            <div className=\"command-list-width-box\"></div>\r\n            <div className=\"command-list\">\r\n                <div onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"dousaGroup-selector\" draggable=\"true\">動作グループを追加</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"ichigime-selector\" draggable=\"true\">位置決め</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"oshituke-selector\" draggable=\"true\">押付け</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"toruku-selector\" draggable=\"true\">トルク制限</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"taima-selector\" draggable=\"true\">タイマ</div>\r\n                <div ref={commandSelectorRef} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"kurikaeshi-selector\" draggable=\"true\">繰り返し</div>\r\n            </div>\r\n            <div className=\"center-section\">\r\n                <TopMenu tanniValue={tanniValue} setTanniValue={setTanniValue} programData={programData} setProgramData={setProgramData} loopData={loopData} setLoopData={setLoopData} layerRef={layerRef} cmlOutput={cmlOutput} setCmlOutput={setCmlOutput} isNyuryokuShingou={isNyuryokuShingou} setIsNyuryokuShingou={setIsNyuryokuShingou} jiku={jiku} setJiku={setJiku}/>\r\n                <ProgramBlock tanniValue={tanniValue} setTanniValue={setTanniValue} isNyuryokuShingou={isNyuryokuShingou} setCmlOutput={setCmlOutput} loopData={loopData} setLoopData={setLoopData} programData={programData} setProgramData={setProgramData} jiku={jiku} setJiku={setJiku} currentDraggedCommand={currentDraggedCommand} setCurrentDraggedCommand={setCurrentDraggedCommand}/>\r\n            </div>\r\n            <div className=\"cml-output-section\">\r\n                <h3 onClick={() => popMessage(\"FUCK OFF\")}>CML</h3>\r\n                <Editor value={cmlOutput} onChange={setCmlOutput} />\r\n                <div className=\"jikkou-button\">\r\n                    <Button variant=\"contained\" onClick={() => handleFileExport()}>\r\n                        テキストファイルにエクスポート\r\n                    </Button>\r\n                    <div className=\"copy-cml-container\">\r\n                        <div className=\"copy-cml\" onMouseEnter={() => display(expCopy)} onMouseLeave={() => hide(expCopy)} onClick={() => copyCML(cmlOutput)}><i className=\"fas fa-copy\"></i></div>\r\n                        <div ref={expCopy} className=\"exp-box exp-copy hidden\">コピー</div>\r\n                        <div ref={expCopyDone} className=\"exp-box exp-copy-done hidden\">コピーされました</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nconst PREFIX = 'CML-app-'\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n    const prefixedKey = PREFIX + key\r\n\r\n    const [value, setValue] = useState(() => {\r\n        const jsonValue = localStorage.getItem(prefixedKey)\r\n        if (jsonValue != null) return JSON.parse(jsonValue)\r\n        \r\n        if (typeof initialValue === 'function') {\r\n            return initialValue()\r\n        } else {\r\n            return initialValue\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }, [prefixedKey, value])\r\n\r\n    return [value, setValue] \r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}